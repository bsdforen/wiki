

<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1.81. make.conf optimieren &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.82. make world" href="make_world.txt.html" />
    <link rel="prev" title="1.80. Majordomo Postfix" href="majordomo_postfix.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.37. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.38. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.39. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.40. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.41. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.42. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.43. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.44. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.45. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.46. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.47. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.48. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.49. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_pefs.txt.html">1.50. Festplattenverschlüsselung mit pefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.51. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.52. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.53. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.54. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.55. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.56. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.57. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.58. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.59. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="grub2-anleitung.txt.html">1.61. GRUB2-Anleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.62. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.63. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.64. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.65. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.66. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.67. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.68. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.69. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.70. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.71. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.72. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.73. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.74. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.75. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.76. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.77. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.78. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.79. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.80. Majordomo Postfix</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.81. make.conf optimieren</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#verwandte-artikel">1.81.1. Verwandte Artikel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-syntax">1.81.2. make Syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kommentare">1.81.2.1. Kommentare</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variablen">1.81.2.2. Variablen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ausgabe">1.81.2.3. Ausgabe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-schleifen-und-if-konstrukte">1.81.2.4. for-Schleifen und if-Konstrukte</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler-flags">1.81.3. Compiler Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cc-cxx-und-cpp">1.81.3.1. CC, CXX und CPP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cputype">1.81.3.2. CPUTYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cflags-und-coptflags">1.81.3.3. CFLAGS und COPTFLAGS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#optimierungen-fur-kernel-und-welt">1.81.4. Optimierungen für Kernel und Welt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kernel">1.81.4.1. Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#welt">1.81.4.2. Welt</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#optimierungen-fur-ports">1.81.5. Optimierungen für Ports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vorbereitungen">1.81.5.1. Vorbereitungen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#einen-port-optimieren">1.81.5.2. Einen Port optimieren</a></li>
<li class="toctree-l4"><a class="reference internal" href="#einsatz-von-listen-und-schleifen">1.81.5.3. Einsatz von Listen und Schleifen</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beispiele-anwendungsfalle-und-problemlosungen">1.81.6. Beispiele, Anwendungsfälle und Problemlösungen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#archivers-unzip">1.81.6.1. archivers/unzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#devel-sdl12-und-x11-xorg-libraries">1.81.6.2. devel/sdl12 und x11/xorg-libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-loader">1.81.6.3. /boot/loader</a></li>
<li class="toctree-l4"><a class="reference internal" href="#etc-make-conf">1.81.6.4. /etc/make.conf</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quellen">1.81.7. Quellen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.82. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.83. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.84. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.85. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.86. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.87. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.88. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.89. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.90. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.91. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.92. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.93. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="openvpn_als_tunnel_zum_eigenen_netzwerk.txt.html">1.94. OpenVPN als Tunnel zum eigenen Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.95. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.96. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.97. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.98. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.99. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.100. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.101. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.102. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.103. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.104. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.105. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.106. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.107. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.108. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.109. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.110. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.111. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.112. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.113. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.114. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.115. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.116. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.117. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.118. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.119. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.120. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.121. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.122. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.123. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.124. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.125. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.126. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.127. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.128. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.129. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.130. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.131. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.132. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.133. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.134. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.135. USB-Stick Unterstützung</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_automount_ohne_hal.txt.html">1.136. USB Automount ohne HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.137. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.138. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.139. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.140. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.141. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.142. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.143. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.144. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.145. Xorg Konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeit_synchronisieren_mit_ntp.txt.html">1.146. Zeit synchronisieren mit ntp</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.147. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.148. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.81. </span>make.conf optimieren</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/howto/make.conf_optimieren.txt.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="make-conf-optimieren">
<h1><span class="section-number">1.81. </span>make.conf optimieren<a class="headerlink" href="#make-conf-optimieren" title="Link zu dieser Überschrift">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd.png" src="../_images/logo-freebsd.png" />
</div>
<p>Dieser Artikel ist für experimentelle Naturen gedacht, die gerne versuchen Code
mit verschiedenen Compilern und Flags zu kompilieren. Dazu wird erklärt, was
mit der Datei <strong>/etc/make.conf</strong> alles beeinflusst werden kann und wie
for-Schleifen und einfache if-Abfragen gestaltet werden, um wiederkehrendes zu
automatisieren.  Einiges lässt sich hier wahrscheinlich auch auf andere BSDs
übertragen.</p>
<p>Die Datei <strong>/etc/make.conf</strong> wird immer dann ausgelesen, wenn der Befehl
<strong>make</strong> aufgerufen wird, also beim Bauen des
<a class="reference external" href="/kategorie/Kernel">Kernels</a>, der <a class="reference external" href="/howto/MakeWorld">Welt</a> und
auch beim Bauen von <a class="reference external" href="/howto/paketsysteme#freebsd-ports">Ports</a>. In
FreeBSD gibt es feste Vorgaben zur Gestaltung von Makefiles für Ports,
so dass das Verhalten recht einheitlich ist. Manchmal kommt es jedoch zu
Ausnahmen. Auch dazu gibt es Beispiele, die klären sollen wie Probleme
erkannt und gelöst werden.</p>
<div class="section" id="verwandte-artikel">
<h2><span class="section-number">1.81.1. </span>Verwandte Artikel<a class="headerlink" href="#verwandte-artikel" title="Link zu dieser Überschrift">¶</a></h2>
<p>Es gibt einige verwandte Artikel die sich auch teilweise mit der
<strong>/etc/make.conf</strong> beschäftigen und für Leser dieses Artikels
wahrscheinlich ebenfalls interessant sind.</p>
<ul class="simple">
<li><p><a class="reference external" href="/anwendungen/csup">csup</a></p></li>
<li><p><a class="reference external" href="/anwendungen/bsdadminscripts">bsdadminscripts</a></p></li>
<li><p><a class="reference external" href="/freebsd/kernelerstellen">kernel erstellen</a></p></li>
</ul>
</div>
<div class="section" id="make-syntax">
<h2><span class="section-number">1.81.2. </span>make Syntax<a class="headerlink" href="#make-syntax" title="Link zu dieser Überschrift">¶</a></h2>
<p>Üblicherweise werden in der Datei <strong>/etc/make.conf</strong> nur Variablen
gesetzt, jedoch wird sie wie jedes andere Makefile interpretiert. Das
hat zur Folge, dass Schleifen und if-Abfragen verwendet oder Nachrichten
auf die Konsole ausgeben werden können.</p>
<div class="section" id="kommentare">
<h3><span class="section-number">1.81.2.1. </span>Kommentare<a class="headerlink" href="#kommentare" title="Link zu dieser Überschrift">¶</a></h3>
<p>Kommentare sind ein sinnvolles Mittel, um große Dateien lesbarer zu
gestalten und zu strukturieren.</p>
<p>Kommentare werden erzeugt indem eine Zeile mit einer Raute (#) begonnen
wird:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Diese Zeile wird von make ignoriert. ;-)</span>
</pre></div>
</div>
</div>
<div class="section" id="variablen">
<h3><span class="section-number">1.81.2.2. </span>Variablen<a class="headerlink" href="#variablen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Zum Bearbeiten der Datei <strong>/etc/make.conf</strong> ist es wichtig zu wissen,
wie Variablen gesetzt oder verändert werden.</p>
<p>Variablen werden nach dem Schema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VARIABLE</span><span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<p>gesetzt. Der Name der Variablen muss dabei mit dem ersten Zeichen der
Zeile beginnen. Leerzeichen und Tabulatoren vor und hinter dem Wert
(value) werden von make entfernt. Wenn Leerzeichen im Wert einer
Variable erwünscht sind, muss der Wert in Anführungszeichen („) gesetzt
werden.</p>
<p>Variablen können auch Listen von Werten enthalten, die beispielsweise in
einer for-Schleife ausgewertet werden kann. Zulässige Trennzeichen sind
Tabulatoren und Leerzeichen. Da lange Wertelisten leicht unübersichtlich
werden, kann durch Einfügen von Zeilensprüngen mit einem vorhergehenden
Backslash () die Lesbarkeit deutlich erhöht werden. Es ist wichtig,
dass sich hinter dem Backslash außer dem Zeilensprung keine weiteren
Zeichen befinden. Hier ein schematisches Beispiel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VARIABLE</span><span class="o">=</span>  <span class="n">foo</span> \
           <span class="n">bar</span> \
           <span class="n">value3</span>
</pre></div>
</div>
<p>Um Variablen zu verwenden werden sie mit runden oder spitzen Klammern
umschlossen und ein Dollar-Symbol vorangestellt. Hier ein Beispiel das
den Wert der Variablen <strong>CPUTYPE</strong> und <strong>CFLAGS</strong> ausgibt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.warning CPUTYPE=${CPUTYPE} CFLAGS=$(CFLAGS)
</pre></div>
</div>
<p>Wer Variablen nur dann einen Wert zuweisen will, falls sie noch nicht
gesetzt sind kann das mit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>VARIABLE?=  value
</pre></div>
</div>
<p>tun. Um an eine Liste weitere Werte anzuhängen wird der &lt;tt&gt;+=&lt;/tt&gt;
Operator verwendet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VARIABLE</span><span class="o">+=</span>  <span class="n">value4</span> \
            <span class="n">value5</span>
</pre></div>
</div>
<p>Um eine Variable zu löschen, wird folgender Befehl verwendet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">undef</span> <span class="n">VARIABLE</span>
</pre></div>
</div>
<p>Wer einer Variablen das Ergebnis eines Shell Aufrufs zuweisen will macht
das folgendermaßen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VARIABLE</span><span class="o">!=</span>  <span class="n">COMMAND</span>
</pre></div>
</div>
<p>Ein solcher Aufruf sollte allerdings wohl überlegt sein. Beispielsweise
wird beim Autor auf dem Notebook <strong>/usr/src</strong> vom Automounter gemountet,
was nicht immer verfügbar ist. Der ‚!=‘ Operator wird in diesem Fall
verwendet um das physische Verzeichnis <strong>/usr/src</strong> zu finden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SOURCEDIR</span><span class="o">!=</span>  <span class="p">(</span><span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">src</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">&amp;&amp;</span> <span class="n">pwd</span> <span class="o">-</span><span class="n">P</span><span class="p">;</span> <span class="n">exit</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Da <strong>/usr/src</strong> nicht immer vorhanden ist, werden Fehlermeldungen des
‚cd‘-Befehls unterdrückt und ‚pwd‘ nur aufgerufen, falls ‚cd‘
erfolgreich war. ‚exit 0‘ stellt sicher das ‚make‘ nicht abbricht, wenn
hier ein Fehler auftritt.</p>
</div>
<div class="section" id="ausgabe">
<h3><span class="section-number">1.81.2.3. </span>Ausgabe<a class="headerlink" href="#ausgabe" title="Link zu dieser Überschrift">¶</a></h3>
<p>In der Datei <strong>/etc/make.conf</strong> machen Ausgaben normalerweise nicht viel
Sinn, jedoch gibt es Fälle in denen sie helfen herauszufinden warum die
gesetzten Variablen keinen oder nicht den gewünschten Effekt haben. Es
gibt zwei Befehle, die Ausgaben erzeugen. Der Befehl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">error</span> <span class="n">message</span>
</pre></div>
</div>
<p>gibt eine Nachicht aus und terminiert dann den make-Prozess.
Entsprechend ist er für unsere Zwecke nicht besonders geeignet. Besser
ist der Befehl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">warning</span> <span class="n">message</span>
</pre></div>
</div>
<p>der ohne Nebeneffekt eine Nachicht ausgibt. Die Nützlichkeit zur
Diagnose liegt darin, dass mit dem Befehl natürlich auch Variablen
ausgeben werden können.</p>
</div>
<div class="section" id="for-schleifen-und-if-konstrukte">
<h3><span class="section-number">1.81.2.4. </span>for-Schleifen und if-Konstrukte<a class="headerlink" href="#for-schleifen-und-if-konstrukte" title="Link zu dieser Überschrift">¶</a></h3>
<p>Hier ist ein Schema für eine for-Schleife:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.for ITERATOR in ${LIST}
...
.endfor
</pre></div>
</div>
<p>Diese Art von Schleife ist in vielen Sprachen als foreach-Schleife
bekannt. Der Schleifeninhalt wird für jeden Wert in <strong>$LIST</strong> einmal
aufgerufen. Der aktuelle Wert ist dabei in <strong>${ITERATOR}</strong> abrufbar.</p>
<p>Für unsere Zwecke benötigen wir lediglich zwei verschiedene
if-Konstrukte. Als erstes wäre da ein normaler Vergleich der Form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.if value == ${VARIABLE}
</pre></div>
</div>
<p>Falls <strong>VARIABLE</strong> der Iterator ist, ist es wichtig, dass dieser auf der
rechten Seite steht. Hier ein Beispiel aus einer <strong>/etc/make.conf</strong>, in
der verschiedene Compiler für verschiedene Ports verwendet werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.for BUILDPATH in ${BASE_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
CC=         cc
CXX=            c++
CPP=            cpp
.endif
.endfor
</pre></div>
</div>
<p><strong>BASE_BUILD</strong> ist eine Liste von Ports, die immer mit dem
Standardcompiler gebaut werden. <strong>.CURDIR</strong> wird von ‚make‘ gesetzt und
enthält das Verzeichnis in dem ‚make‘ läuft.</p>
<p>Das zweite if-Konstrukt das benötigt wird dient dazu festzustellen, ob
der Wert einer Variablen einem bestimmten Verzeichnis (* erlaubt)
entspricht.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.if${VARIABLE:Mpath}
</pre></div>
</div>
<p>Dieses Konstrukt lässt sich besonders gut für Parameter verwenden, die
nur für einen bestimmten Port gesetzt werden sollen. Hier wieder ein
Beispiel aus der <strong>/etc/make.conf</strong> des Autors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.if${.CURDIR:M*/ports/www/firefox*-i18n}
WITHOUT_SWITCHER=   yes
FIREFOX_I18N=   en-GB
.endif
</pre></div>
</div>
</div>
</div>
<div class="section" id="compiler-flags">
<h2><span class="section-number">1.81.3. </span>Compiler Flags<a class="headerlink" href="#compiler-flags" title="Link zu dieser Überschrift">¶</a></h2>
<p>‚make‘ wird für gewöhnlich zum Kompilieren von Programmen verwendet. Der
Standardcompiler unter FreeBSD ist GCC. Es ist jedoch üblich, den Aufruf
für den Compiler aus Variablen die in der <strong>/etc/make.conf</strong> gesetzt
werden können zu entnehmen, so dass zentral festgelegt werden kann womit
und wie kompiliert wird.</p>
<p>Detailierte Informationen zu den behandelten und weiteren Variablen
finden sich in der Manpage <strong>make.conf(5)</strong>.</p>
<div class="section" id="cc-cxx-und-cpp">
<h3><span class="section-number">1.81.3.1. </span>CC, CXX und CPP<a class="headerlink" href="#cc-cxx-und-cpp" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Standardeinstellungen lauten:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CC</span><span class="o">=</span>    <span class="n">cc</span>
<span class="n">CXX</span><span class="o">=</span>   <span class="n">c</span><span class="o">++</span>
<span class="n">CPP</span><span class="o">=</span>   <span class="n">cpp</span>
</pre></div>
</div>
<p>Wer einen anderen Compiler aus den Ports gebaut hat und verwenden möchte
kann das so tun:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CC</span><span class="o">=</span>    <span class="n">gcc41</span>
<span class="n">CXX</span><span class="o">=</span>   <span class="n">c</span><span class="o">++</span><span class="mi">41</span>
<span class="n">CPP</span><span class="o">=</span>   <span class="n">cpp41</span>
</pre></div>
</div>
<p>In diesem Fall wird der GCC 4.1 verwendet.</p>
<p>Einige Ports verwerfen diese Angaben und schreiben fest einen bestimmten
Compiler vor. Dafür gibt es meist einen guten Grund. Deshalb ist es
meist eine schlechte Idee, sich an den jeweiligen Makefiles zu schaffen
machen, um dies zu <em>korrigieren</em>.</p>
</div>
<div class="section" id="cputype">
<h3><span class="section-number">1.81.3.2. </span>CPUTYPE<a class="headerlink" href="#cputype" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die nächste wichtige Variable ist CPUTYPE. Sie wird üblicherweise mit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CPUTYPE?=   cpu type
</pre></div>
</div>
<p>gesetzt. <strong>CPUTYPE</strong> spielt beim Bauen des Basissystems und des Kernels
eine Rolle und hängt Compiler-Parameter an die Variablen <strong>CFLAGS</strong> und
<strong>COPTFLAGS</strong> an.</p>
</div>
<div class="section" id="cflags-und-coptflags">
<h3><span class="section-number">1.81.3.3. </span>CFLAGS und COPTFLAGS<a class="headerlink" href="#cflags-und-coptflags" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Variable <strong>CFLAGS</strong> enthält Parameter für den Compiler, der in
<strong>CC</strong> spezifiziert ist. <strong>COPTFLAGS</strong> enthält die Parameter für
<strong>CXX</strong>. Wenn <strong>COPTFLAGS</strong> nicht gesetzt wird, erbt es den Wert von
<strong>CFLAGS</strong>, was in den meisten Fällen genügt.</p>
<p>Für diesen Artikel sind vor allem die <strong>CFLAGS</strong> <strong>-O</strong>, <strong>-O2</strong>,
<strong>-fno-strict-aliasing</strong> und <strong>-pipe</strong> wichtig.</p>
<ul class="simple">
<li><p><strong>-pipe</strong></p>
<ul>
<li><p>sorgt lediglich dafür das der Compiler Pipes verwendet statt in
Dateien zwischenzuspeichern. Es beschleunigt also leicht das
kompilieren, falls genügend Arbeitsspeicher vorhanden ist.</p></li>
</ul>
</li>
<li><p><strong>-fno-strict-aliasing</strong></p>
<ul>
<li><p>weist den Compiler an auf bestimmte Optimierungen zu verzichten.
Diese Option ist Standard.</p></li>
</ul>
</li>
<li><p><strong>-O</strong></p>
<ul>
<li><p>weist den Compiler an den Code zu optimieren um schnellere
Binaries zu erzeugen. Bei einigen (sehr) wenigen Ports kann das zu
Problemen führen.</p></li>
</ul>
</li>
<li><p><strong>-O2</strong></p>
<ul>
<li><p>ist eine stärkere Optimierung als &lt;tt&gt;-O&lt;/tt&gt; und ist für Welt und
Kernel üblich. Die Wahrscheinlichkeit von Problemen beim
kompilieren von Ports ist etwas größer als bei &lt;tt&gt;-O&lt;/tt&gt; aber
immer noch äußerst gering. Diese Option ist Standard.</p></li>
</ul>
</li>
</ul>
<p>Es gibt zwar noch höhere Optimierungsstufen, diese werden hier jedoch
nicht behandelt.</p>
<p>Desweiteren gibt es diverse Parameter mit denen der Compiler angewiesen
wird, verschiedene Befehlssatzerweiterungen zu verwenden.</p>
<ul class="simple">
<li><p><strong>-mmmx</strong></p>
<ul>
<li><p>für den MMX Befehlssatz.</p></li>
</ul>
</li>
<li><p><strong>-msse -msse2 -msse3</strong></p>
<ul>
<li><p>für die verschiedenen Versionen des SSE Befehlssatzes.</p></li>
</ul>
</li>
<li><p><strong>-m3dnow</strong></p>
<ul>
<li><p>für den 3DNow Befehlssatz von AMD.</p></li>
</ul>
</li>
</ul>
<p>Nach der gcc-Dokumentation werden die erfahrungsgemäß besten CPU
Optimierungen bereits vom <strong>-march</strong> Parameter impliziert der wiederum
wird automatisch von <strong>CPUTYPE</strong> ermittelt. Es ist also in der Regel
nicht nötig diese Parameter einzusetzen.</p>
</div>
</div>
<div class="section" id="optimierungen-fur-kernel-und-welt">
<h2><span class="section-number">1.81.4. </span>Optimierungen für Kernel und Welt<a class="headerlink" href="#optimierungen-fur-kernel-und-welt" title="Link zu dieser Überschrift">¶</a></h2>
<p>Die meisten Einstellungen werden beim Kernel ja bekanntlich in einer
entsprechenden Datei vorgenommen (siehe
<a class="reference external" href="http://www.de.freebsd.org/doc/de_DE.ISO8859-1/books/handbook/kernelconfig.html">Handbuch</a>).
Mehr Möglichkeiten gibt es in der <strong>/etc/make.conf</strong> beim Manipulieren
der Welt. Da das jedoch selten erwünscht ist, fällt dieser Abschnitt
sehr kurz aus.</p>
<p>Buildworld und buildkernel sind beim Autor übrigens stets gescheitert,
wenn stärkere Optimierungen als <strong>-O2 -fno-strict-aliasing -pipe</strong>
versucht wurden. Deswegen ist es sinnvoll, CFLAGS für buildkernel und
buildworld seperat zu setzen, wenn bei den Ports mehr erwünscht ist. Wie
das geht wird mit dem Lesen des nächsten Kapitels klar.</p>
<div class="section" id="kernel">
<h3><span class="section-number">1.81.4.1. </span>Kernel<a class="headerlink" href="#kernel" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die sinnvollste Variable für den Kernelbau ist sicherlich <strong>KERNCONF</strong>.
In <strong>KERNCONF</strong> wird der Dateiname (ohne Pfad) der gewünschten
Kernelkonfiguration angegeben. Wird mehr als eine Kernelkonfiguration
angegeben, wird nur die erstgenannte installiert. Der Standardwert ist
<strong>GENERIC</strong>. Es gibt auch Variablen, um den Bau bestimmter Module zu
verhindern oder das Verhalten des Bootloaders zu verändern.</p>
</div>
<div class="section" id="welt">
<h3><span class="section-number">1.81.4.2. </span>Welt<a class="headerlink" href="#welt" title="Link zu dieser Überschrift">¶</a></h3>
<p>Für die Welt können Variablen gesetzt werden, um bestimmte Bestandteile
nicht zu bauen. Für Einige ist vielleicht auch die Möglichkeit, die Welt
mit Binärkompatibilität für ältere FreeBSD Versionen zu bauen,
interessant. Dazu dienen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">COMPAT_FREEBSD4</span>
<span class="n">COMPAT_FREEBSD5</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="optimierungen-fur-ports">
<h2><span class="section-number">1.81.5. </span>Optimierungen für Ports<a class="headerlink" href="#optimierungen-fur-ports" title="Link zu dieser Überschrift">¶</a></h2>
<p>Viele Einstellungen für die Ports können mit <strong>make config</strong> vorgenommen
werden. Jedoch gibt es immer wieder einige Dinge, die man nur als
Parameter übergeben oder in der <strong>/etc/make.conf</strong> eingestellt werden
können. Einige Variablen haben überall den gleichen oder gar keinen
Effekt. Einige sollten nur für einen bestimmten Port gesetzt werden und
natürlich gibt es solche, die je nach Port andere Werte haben müssen.
Wie das am besten realisiert wird, wird in diesem Abschnitt behandelt.</p>
<div class="section" id="vorbereitungen">
<h3><span class="section-number">1.81.5.1. </span>Vorbereitungen<a class="headerlink" href="#vorbereitungen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Am besten wird damit begonnen, sich einen Bereich in der
<strong>/etc/make.conf</strong> anzulegen, der ausschließlich für Einstellungen die
Ports betreffen reserviert ist. Dazu wird folgendes if-Konstrukt
verwendet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.if ${.CURDIR:M*/ports/*} &amp;&amp; !${.CURDIR:M*/work/*}

.endif
</pre></div>
</div>
<p>Auf diese Weise wird alles was hier geschieht von Welt und Kernel
abgekapselt. Das ist nicht wirklich notwendig, aber sicherlich eine gute
Angewohnheit, um Fehlerquellen zu minimieren. Die zweite Bedingung
verhindert ein erneutes Einlesen aus dem Verzeichnis in dem das
eigentliche Bauen des Ports stattfindet, da das zu Problemen führen
kann.</p>
<p>Als nächstes können in diesem Bereich ein paar Variablen gesetzt werden,
die nicht schaden können und manchmal nützlich sind. Zum Beispiel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITHOUT_ARTS</span><span class="o">=</span>       <span class="n">yes</span>
<span class="n">WITH_IPV6</span><span class="o">=</span>      <span class="n">yes</span>
</pre></div>
</div>
<p>Jetzt können noch versuchsweise Variablen für einen bestimmten Port
gesetzt werden. Zum Ausprobieren am besten einen Port verwenden, der
nicht allzu lange zum Bauen braucht:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># x11-wm/fluxbox
.if${.CURDIR:M*/ports/x11-wm/fluxbox-devel}
WITHOUT_SLIT=       yes
WITH_IMLIB2=        yes
.endif
</pre></div>
</div>
<p>Jemand der nicht Fluxbox verwendet sollte natürlich ein anderes Beispiel
suchen.</p>
<p>Wenn ein Probeversuch funktioniert hat können noch Variablen gesetzt
werden in den Ports einen anderen Compiler zu verwenden. Das kann gut
mit einem kleinen Port wie <strong>archivers/zip</strong> getestet werden. Nicht
jeder Port funktioniert mit jedem Compiler. Ports die Probleme bereiten
sollten also besser den Standardcompiler verwenden.</p>
<p>Nach diesen Versuchen sollte der Bereich in der <strong>/etc/make.conf</strong> jetzt
ungefähr so aussehen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.if ${.CURDIR:M*/ports/*} &amp;&amp; !${.CURDIR:M*/work/*}

CC=         gcc41
CXX=            g++41
CPP=            cpp41

WITHOUT_ARTS=       yes
WITH_IPV6=      yes

# x11-wm/fluxbox
.if${.CURDIR:M*/ports/x11-wm/fluxbox}
CC=         cc
CXX=            c++
CPP=            cpp
WITHOUT_SLIT=       yes
WITH_IMLIB2=        yes
.endif

.endif
</pre></div>
</div>
</div>
<div class="section" id="einen-port-optimieren">
<h3><span class="section-number">1.81.5.2. </span>Einen Port optimieren<a class="headerlink" href="#einen-port-optimieren" title="Link zu dieser Überschrift">¶</a></h3>
<p>Um die Anpassungsmöglichkeiten eines Ports zu erfahren wird in das
Ports-Verzeichnis gewechselt.</p>
<p>Mit dem Befehl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># grep defined Makefile</span>
</pre></div>
</div>
<p>finden sich meist alle Variablen. Wenn die Namen nicht selbsterklärend
sind, ist es sinnvoll das <strong>Makefile</strong> zu lesen. Das geht beispielsweise
mit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># less Makefile</span>
</pre></div>
</div>
<p>Die gewünschten Parameter können nun wie für Fluxbox beschrieben in der
<strong>/etc/make.conf</strong> gesetzt werden.</p>
</div>
<div class="section" id="einsatz-von-listen-und-schleifen">
<h3><span class="section-number">1.81.5.3. </span>Einsatz von Listen und Schleifen<a class="headerlink" href="#einsatz-von-listen-und-schleifen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Im Laufe der Zeit wächst die <strong>/etc/make.conf</strong> oft aufgrund immer
weiterer Einstellung für immer mehr Ports. Die Datei <strong>/etc/make.conf</strong>
platzt also schon bald aus allen Nähten, dann ist es an der Zeit häufige
Ausnahmen zusammenzufassen.</p>
<p>Das wohl häufigste Ereignis ist wohl, dass ein Programm mit dem Compiler
der Wahl nicht gebaut werden kann oder nicht funktioniert. Die Lösung
ist simpel, die Skriptfähigkeiten von <strong>make</strong> erlauben es solche
Programme in einer Liste zu sammeln. Wenn nun der aktuellen Pfad
(<strong>.CURDIR</strong>) mit dieser Liste verglichen wird, kann automatisch
festgestellt werden, ob nicht doch lieber der Standardcompiler verwendet
werden sollte.</p>
<p>Wie Listen und Schleifen verwendet werden, wurde bereits geklärt, also
gibt es hier nur ein Beispiel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>BASE_BUILD=     \
            devel/libtool15 \
            devel/sdl12 \
            net/linc \
            net/liveMedia \
            net/samba-libsmbclient \
            print/ghostscript-gnu-nox11 \
            x11/libgnome \
            x11/xorg-libraries \
            x11-toolkits/gtkmm24 \
            x11-toolkits/libbonoboui \
            x11-toolkits/libgnomeui

.for BUILDPATH in ${BASE_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
CC=         cc
CXX=            c++
CPP=            cpp
.endif
.endfor
</pre></div>
</div>
</div>
</div>
<div class="section" id="beispiele-anwendungsfalle-und-problemlosungen">
<h2><span class="section-number">1.81.6. </span>Beispiele, Anwendungsfälle und Problemlösungen<a class="headerlink" href="#beispiele-anwendungsfalle-und-problemlosungen" title="Link zu dieser Überschrift">¶</a></h2>
<p>Als letzten Punkt dieses Absatzes gibt es ein Beispiel für eine
<strong>/etc/make.conf</strong>, die wahrscheinlich vor allem Anfängern einen guten
Überblick über die Möglichkeiten gibt. Ansonsten gibt es hier Beispiele
von Problemen mit denen der Autor irgendwann mal konfrontiert wurde.
Diese Probleme tauchen wahrscheinlich nicht auf jedem System so auf und
sollen eher als Beispiele dafür verstanden werden, wie mit Problemen
beim Kompilieren von Ports jenseits der Standardvorgaben umgegangen
wird.</p>
<div class="section" id="archivers-unzip">
<h3><span class="section-number">1.81.6.1. </span>archivers/unzip<a class="headerlink" href="#archivers-unzip" title="Link zu dieser Überschrift">¶</a></h3>
<p>Bei einem <strong>ports-mgmt/portupgrade</strong> wurde plötzlich der Port
<strong>java/jdk15</strong> nicht mehr gebaut. Die Prüfsumme der Dateien die aus dem
Archiv <strong>jdk-1_5_0-src-scsl.zip</strong> entpackt wurden stimmte nicht, also
lud ich die Datei erneut von Suns Homepage. Das brachte keine Besserung,
obwol die Prüfsumme des Archivs korrekt war.</p>
<p>Also versuchte ich den Port <strong>archiver/unzip</strong> zu bauen, was ohne
Probleme funktionierte. Bei einem manuellen Test mit einem Zip-Archiv
stellte sich jedoch heraus das unzip ausschließlich Dateien der Länge 0
produziert.</p>
<p>Der nahelegendste Ansatz war es unzip mit dem Standardcompiler zu bauen.
Das funktionierte ebenso gut, aber unzip produzierte immer noch die
Dateien der Länge 0. Der nächste Ansatz war also nicht die
Compilerversion sondern die Optimierung.</p>
<p>Ohne Optimierung funktioniert unzip einwandfrei, unabhängig davon
welchen der beiden Compiler ich verwendete. Damit war die Quelle des
Problems erkannt. Weitere Tests ergaben, das -O noch zuverlässig
funktioniert, -O2 aber nicht mehr.</p>
<p>Ungewöhnlich an diesem Beispiel war nicht, dass es ein Problem gab,
sondern dass es nicht bereits beim Kompilieren aufgetreten ist. Solche
Probleme können sehr unangenehm werden, da sie lange Zeit unentdeckt ein
ansonsten reibungslos funktionierendes System stören können. Der
Schlüssel zur Lösung war in diesem Fall der manuelle Test von unzip.
Leider wird das bei komplexeren Programmen ungleich schwieriger.</p>
</div>
<div class="section" id="devel-sdl12-und-x11-xorg-libraries">
<h3><span class="section-number">1.81.6.2. </span>devel/sdl12 und x11/xorg-libraries<a class="headerlink" href="#devel-sdl12-und-x11-xorg-libraries" title="Link zu dieser Überschrift">¶</a></h3>
<p>Nach einem portupgrade -a konnten plötzlich ports die von
<strong>devel/sdl12</strong> abhängig waren nicht mehr gebaut werden. Die Ports
scheiterten mit dem Fehler, dass keine Version von sdl11-config höher
oder gleich (&gt;=) der benötigten Version vorhanden war. Der Befehl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pkg_info -W /usr/local/bin/sdl11-config</span>
</pre></div>
</div>
<p>brachte Aufschluss darüber zu welchem Paket die Datei gehörte, also fing
ich an den Port <strong>devel/sdl12</strong> neu zu bauen. Das jedoch brachte keine
Besserung.</p>
<p>Glücklicherweise hatten die Ports mit dem Scheitern der
Versionserkennung auch ein Logfile angelegt, aus dem hervorging, dass
ein Fehler beim Aufruf einer Library aufgetreten war. Ein weiteres
<strong>pkg_info -W</strong> brachte Aufschluss darüber, dass die Library zum Port
<strong>x11/xorg-libraries</strong> gehörte.</p>
<p>Alles weitere war mehr oder weniger Routine. Es stellte sich heraus,
dass x11/xorg-libraries zwar ohne sichtliche Fehler mit dem gcc41 gebaut
werden kann, jedoch funktionierten auf diese Weise nicht alle erzeugten
Libraries so wie sie sollten.</p>
<p>Dieser Fehler hat mich sehr lange beschäftigt, da ich von den
Fehlermeldungen zum Glauben verleitet war, der Fehler läge beim Port
devel/sdl12. Ich hätte mir viele Nerven und einige Zeit sparen können,
wenn ich die Logfiles von Anfang an gründlicher gelesen hätte.</p>
</div>
<div class="section" id="boot-loader">
<h3><span class="section-number">1.81.6.3. </span>/boot/loader<a class="headerlink" href="#boot-loader" title="Link zu dieser Überschrift">¶</a></h3>
<p>Wenn ich buildworld und installworld mit <strong>CPUTYPE?=pentium-m</strong>
ausführe, friert bei mir das System beim nächsten boot ein bevor der
Kernel geladen wird. Verantwortlich dafür ist die Datei
<strong>/boot/loader</strong>, die ich deswegen immer vor dem Reboot mit einem alten
Backup ersetzt habe.</p>
<p>Nach meinen Experimenten mit den Ports habe ich beschlossen auch dieses
Problem zu lösen. Mit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># find /usr/src -name loader</span>
</pre></div>
</div>
<p>fand ich das Verzeichnis <strong>/usr/src/sys/boot/i386/loader</strong>. Jetzt
brauchte ich nur noch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CPUTYPE?=    pentium3
</pre></div>
</div>
<p>für das Verzeichnis einzutragen und ich kann mir die Backup-schieberei
sparen.</p>
</div>
<div class="section" id="etc-make-conf">
<h3><span class="section-number">1.81.6.4. </span>/etc/make.conf<a class="headerlink" href="#etc-make-conf" title="Link zu dieser Überschrift">¶</a></h3>
<p>Diese <strong>/etc/make.conf</strong> war auf gigantische Ausmaße angewachsen, weil
es für alle Ports, die jetzt unter <strong>BASE_BUILD</strong> zusammengefasst sind,
eigene Einträge gab. Die unübersichtliche Größe hat letztlich dazu
geführt, dass ich mich ein wenig in die Grundlagen von make
eingearbeitet und diesen Artikel geschrieben habe.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># ---&lt; updating &gt;--------------------------------------------------------------
SUP_UPDATE=     yes
DOC_LANG=       en_US.ISO8859-1
SUPFLAGS=       -L 2 -z
SUPHOST=        cvsup4.de.freebsd.org
SUPFILE=        /usr/local/etc/cvsup/sources
PORTSSUPFILE=       /usr/local/etc/cvsup/ports
#DOCSUPFILE=        /usr/local/etc/cvsup/doc

# Fetching from de sites preferred
MASTER_SORT_REGEX?=://[^/]*\.de[/.]
# -----------------------------------------------------------------------------

# wget statt fetch zum downloaden der ports benutzen. falls existiert
.if exists(/usr/local/bin/wget)
DISABLE_SIZE=   yes
FETCH_CMD=      /usr/local/bin/wget --continue --passive-ftp -t 2 -T 15
.endif

# ---&lt; common &gt;----------------------------------------------------------------
# Default build flags.
CPUTYPE?=       pentium-m
CFLAGS=         -O2 -pipe

# This causes the java vm wrapper to choose my preferred version of Java.
#JAVA_PREFERRED_PORTS?= JAVA_PORT_NATIVE_BSDJAVA_JDK_1_5
# -----------------------------------------------------------------------------

# ---&lt; configure buildworld/buildkernel &gt;--------------------------------------
KERNCONF=       TPR40-6

# /boot/loader crashs with pentium-m
.if ${.CURDIR:M*/src/sys/boot/i386/loader*}
.undef CPUTYPE
CPUTYPE?=       pentium3
CFLAGS=         -O2 -pipe
.endif
# -----------------------------------------------------------------------------

# ---&lt; configure ports &gt;-------------------------------------------------------
.if ${.CURDIR:M*/ports/*} &amp;&amp; !${.CURDIR:M*/work/*}

# Set gcc version for ports.
CC=         gcc41
CXX=            g++41
CPP=            cpp41

# Build these ports with the compiler provided by the base system.
BASE_BUILD=     \
            deskutils/adesklets \
            devel/pkgconfig \
            devel/sdl12 \
            games/scummvm \
            graphics/gimp \
            graphics/inkscape \
            graphics/OpenEXR \
            graphics/png \
            lang/gcc41 \
            lang/gcc-ooo \
            mail/thunderbird \
            math/octave \
            multimedia/bmpx \
            multimedia/ffmpeg \
            multimedia/mpeg4ip-libmp4v2 \
            multimedia/vlc \
            multimedia/xmms \
            net/linc \
            net/samba-libsmbclient \
            print/ghostscript-gnu-nox11 \
            security/gnupg \
            sysutils/cdrtools \
            sysutils/k3b \
            textproc/aspell \
            www/firefox \
            www/linuxpluginwrapper \
            x11-fm/krusader \
            x11-toolkits/wxgtk26 \

# Don&#39;t build these ports.
IGNORE_BUILD=       \
            editors/openoffice.org-* \

# Build these ports with -O instead of -O2.
WEAK_OPT_BUILD=     \
            archivers/unzip \

# Build these ports without optimizations.
NO_OPT_BUILD=       \

# Common settings that are applied to all ports in hope to do some good.
WITHOUT_ARTS=       yes
WITH_IPV6=      yes
WITH_MOZILLA=       firefox
WITHOUT_DEBUG=      yes
WITH_GTK2=      yes
WITH_FAM_SYSTEM=    fam

# editors/openoffice.org*
.if ${.CURDIR:M*/ports/editors/openoffice.org*}
#WITH_GNUGCJ=       yes
LOCALIZED_LANG=     en-GB
WITH_TTF_BYTECODE_ENABLED=yes
WITHOUT_MOZILLA=    yes
.endif

# java/jdk1?
.if ${.CURDIR:M*/ports/java/jdk1?}
.undef WITH_IPV6
.endif

# multimedia/bmpx
.if ${.CURDIR:M*/ports/multimedia/bmpx}
WITHOUT_PYTHON=     yes
WITHOUT_PERL=       yes
.endif

# devel/subversion
.if ${.CURDIR:M*/ports/devel/subversion}
WITHOUT_BDB=        yes
.endif

# multimedia/vlc
.if ${.CURDIR:M*/ports/multimedia/vlc}
WITH_FAAD=      yes
WITH_REALAUDIO=     yes
WITH_SDL=       yes
WITH_X264=      yes
WITH_THEORA=        yes
WITH_WIN32_CODECS=  yes
WITH_DVDREAD=       yes
# WITH_MOZILLA_PLUGIN=  yes
WITH_SSL=       yes
WITH_OPTIMIZED_CFLAGS=  yes
.endif

# Check weather building with the base compiler is required.
.for BUILDPATH in ${BASE_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
CC=         cc
CXX=            c++
CPP=            cpp
.endif
.endfor

# Check weather this port should be ignored.
.for BUILDPATH in ${IGNORE_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
IGNORE=         Build me later.
.endif
.endfor

# Check weather building with weak optimization is required.
.for BUILDPATH in ${WEAK_OPT_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
CFLAGS=         -O -pipe
.endif
.endfor

# Check weather building without optimization is required.
.for BUILDPATH in ${NO_OPT_BUILD}
.if ${.CURDIR:M*/ports/$(BUILDPATH)}
CFLAGS=         -pipe
.endif
.endfor

.endif
# -----------------------------------------------------------------------------

# added by use.perl 2006-01-05 23:47:54
PERL_VER=5.8.7
PERL_VERSION=5.8.7
</pre></div>
</div>
</div>
</div>
<div class="section" id="quellen">
<h2><span class="section-number">1.81.7. </span>Quellen<a class="headerlink" href="#quellen" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li><p>Der Artikel <a class="reference external" href="http://wiki.bsd-crew.de/index.php/Make.conf_Optimal_nutzen">Make.conf Optimal
nutzen</a>
der <a class="reference external" href="http://www.bsd-crew.de/">BSD-Crew Dresden</a> hat den Anstoß für
die Versuche des Autors gegeben.</p></li>
<li><p>Die Manpage <strong>make.conf(5)</strong>.</p></li>
<li><p>Die Manpage <strong>make(1)</strong>.</p></li>
</ul>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2021-05-29</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="make_world.txt.html" class="btn btn-neutral float-right" title="1.82. make world" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="majordomo_postfix.txt.html" class="btn btn-neutral float-left" title="1.80. Majordomo Postfix" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BSDForen.de.

    </p>
  </div>
    
    
    
    Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
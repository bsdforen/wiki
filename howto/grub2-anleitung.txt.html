

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.61. GRUB2-Anleitung &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.62. IBM Thinkpad BIOS-Update" href="ibm_thinkpad_bios-update.txt.html" />
    <link rel="prev" title="1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP" href="grafikausgabe_im_netzwerk.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.37. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.38. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.39. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.40. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.41. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.42. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.43. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.44. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.45. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.46. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.47. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.48. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.49. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_pefs.txt.html">1.50. Festplattenverschlüsselung mit pefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.51. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.52. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.53. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.54. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.55. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.56. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.57. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.58. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.59. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.61. GRUB2-Anleitung</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#erste-schritte">1.61.1. Erste Schritte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bootkonzepte">1.61.2. Bootkonzepte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#konfiguration">1.61.3. Konfiguration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schlusz">1.61.4. Schluß</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.62. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.63. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.64. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.65. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.66. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.67. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.68. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.69. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.70. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.71. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.72. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.73. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.74. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.75. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.76. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.77. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.78. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.79. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.80. Majordomo Postfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="make.conf_optimieren.txt.html">1.81. make.conf optimieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.82. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.83. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.84. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.85. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.86. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.87. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.88. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.89. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.90. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.91. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.92. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.93. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="openvpn_als_tunnel_zum_eigenen_netzwerk.txt.html">1.94. OpenVPN als Tunnel zum eigenen Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.95. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.96. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.97. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.98. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.99. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.100. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.101. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.102. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.103. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.104. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.105. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.106. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.107. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.108. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.109. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.110. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.111. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.112. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.113. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.114. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.115. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.116. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.117. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.118. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.119. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.120. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.121. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.122. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.123. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.124. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.125. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.126. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.127. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.128. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.129. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.130. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.131. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.132. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.133. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.134. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.135. USB-Stick Unterstützung</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_automount_ohne_hal.txt.html">1.136. USB Automount ohne HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.137. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.138. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.139. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.140. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.141. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.142. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.143. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.144. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.145. Xorg Konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeit_synchronisieren_mit_ntp.txt.html">1.146. Zeit synchronisieren mit ntp</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.147. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.148. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.61. </span>GRUB2-Anleitung</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/howto/grub2-anleitung.txt.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="ibm_thinkpad_bios-update.txt.html" class="btn btn-neutral float-right" title="1.62. IBM Thinkpad BIOS-Update" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="grafikausgabe_im_netzwerk.txt.html" class="btn btn-neutral float-left" title="1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="grub2-anleitung">
<h1><span class="section-number">1.61. </span>GRUB2-Anleitung<a class="headerlink" href="#grub2-anleitung" title="Link zu dieser Überschrift">¶</a></h1>
<aside class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd.png" src="../_images/logo-freebsd.png" />
</aside>
<p>Es gibt etliche Anleitungen für die Benutzung von GRUB2 unter FreeBSD, die aber
praktisch alle nicht über die Angabe einer Handvoll Befehle für ein
Standard-Setup hinausreichen und/oder noch Altlasten von GRUB1 mitbringen.</p>
<p>In dieser kleinen Anleitung will ich GRUB2 ein wenig genauer unter die
Lupe nehmen; GRUB1 werde ich jedoch mit keinem weiteren Wort erwähnen.
Auch soll dies nicht eine komplette Installationsanleitung sein mit
Partitionierung etc. pp.; dazu könnte man vielleicht den Artikel von
User „nukama“ unter dem Titel „<a class="reference external" href="/wiki/user/nukama">MultiBoot mit
Grub2</a>“ konsultieren.</p>
<p>Das FreeBSD-Paket beinhaltet eine Info-Datei (<code class="docutils literal notranslate"><span class="pre">info</span> <span class="pre">grub</span></code>), die
<a class="reference external" href="http://www.gnu.org/software/grub/manual/grub.html">Dokumentation</a>
auf GRUBs Homepage ist ein wenig aktueller; die Dokumentationen von
<a class="reference external" href="https://help.ubuntu.com/community/Grub2">Ubuntu</a> oder <a class="reference external" href="https://wiki.archlinux.org/index.php/GRUB2">Arch
Linux</a> sind teilweise
sogar noch besser (Ubuntu führt auch *BSD auf), aber natürlich auf die
betreffende Linux-Distribution fokussiert.</p>
<div class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>Die GRUB2-Version in den Ports (1.98_1) ist veraltet und kann den Kernel der
neuesten Release (9.1) nicht direkt booten. Sobald ein neuerer Port zur
Verfügung steht, werde ich diesen Hinweis entfernen. Vorerst ist nur
Chainloading möglich.</p>
</div>
<section id="erste-schritte">
<h2><span class="section-number">1.61.1. </span>Erste Schritte<a class="headerlink" href="#erste-schritte" title="Link zu dieser Überschrift">¶</a></h2>
<div class="line-block">
<div class="line">Zuerst will natürlich der Port installiert sein, und zwar
<a class="reference external" href="https://www.google.com/search?q=sysutils/grub2&amp;btnI=lucky">sysutils/grub2</a>.</div>
<div class="line">Wenn man diese Anleitung für einen Linux-basierten GRUB verwenden
will, kann man eine Überraschung erleben. Manche Distributionen
verwenden gepatchte GRUB-Pakete, denen manchmal die Unterstützung für
*BSD und zugehörige Dateisysteme wie UFS einfach fehlt. Nur mit dem
Original-GRUB aus dem FreeBSD-Port (oder unter Linux von Hand
installiert) ist man auf der sicheren Seite.</div>
</div>
<div class="line-block">
<div class="line">GRUB2 gehorcht einer Konfigurationsdatei <code class="docutils literal notranslate"><span class="pre">/boot/grub/grub.cfg</span></code> (so
der Standardpfad), aber um deren Syntax dem unbedarften Nutzer zu
ersparen und sie vollautomatisch zu erzeugen, werden Tools
bereitgestellt, die sich auf eine sehr einfache
Meta-Konfigurationsdatei <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/default/grub</span></code> stützen. In
den gängigen Linux-bezogenen Anleitungen lautet ihr Pfad übrigens
<code class="docutils literal notranslate"><span class="pre">/etc/default/grub</span></code>, das geht in FreeBSD nicht.</div>
<div class="line">Für den Anfang, um überhaupt eine Vorstellung einer <code class="docutils literal notranslate"><span class="pre">grub.cfg</span></code> zu
bekommen, empfehle ich die Verwendung dieser Automatik. Weil der
FreeBSD-Port aber doch etwas mit heißer Nadel gestrickt ist, sollte
man die so erzeugte <code class="docutils literal notranslate"><span class="pre">grub.cfg</span></code> dann auf jeden Fall manuell
nachbearbeiten.</div>
</div>
<p>Meine <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/default/grub</span></code> sieht so</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GRUB_DISTRIBUTOR=&quot;FreeBSD Release 9.0&quot;
GRUB_DEFAULT=1
GRUB_SAVEDEFAULT=false
GRUB_TERMINAL=console
#GRUB_GFXMODE=1024x768
#GRUB_FONT_PATH=
GRUB_TIMEOUT=9
#GRUB_HIDDEN_TIMEOUT=5
GRUB_DISABLE_OS_PROBER=false
GRUB_DISABLE_RECOVERY=true
GRUB_INIT_TUNE=&quot;2000 128 1 192 1 288 1 432 1 648 1 972 1 1458 1 2187 1&quot;``
</pre></div>
</div>
<p>Es werden nur Variablen gesetzt, die den Skripten im Verzeichnis
<code class="docutils literal notranslate"><span class="pre">/usr/local/etc/grub.d</span></code> dann die Informationen liefern, um geeignete
Befehle in die <code class="docutils literal notranslate"><span class="pre">grub.cfg</span></code> zu schreiben. Das Kapitel <em>„Configuration“</em>
in der Dokumentation listet die möglichen Variablen auf, manche
Linux-Distributionen fügen denen noch selbstgestrickte hinzu.</p>
<p>Der Aufruf</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grub</span><span class="o">-</span><span class="n">mkconfig</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>erstellt die eigentliche Konfigurationsdatei. Bevor wir uns an deren
Nachbearbeitung machen, nun ein paar allgemeine Erklärungen.</p>
</section>
<section id="bootkonzepte">
<h2><span class="section-number">1.61.2. </span>Bootkonzepte<a class="headerlink" href="#bootkonzepte" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der Bootloader besteht, ähnlich wie der von FreeBSD, aus mehreren
Stufen. Die erste paßt in einen 512-Byte-Block (ist sogar noch etwas
kleiner, da sie ggf. Platz für eine Partitionstabelle lassen muß), und
ihr Sinn und Zweck besteht einzig und allein darin, zu wissen, wo die
zweite Stufe liegt und wie sie geladen werden kann. Jene ist typisch
20-30 kB groß, hat als Datei den Namen <code class="docutils literal notranslate"><span class="pre">core.img</span></code> und kann nicht aus
einem richtigen Dateisystem herausgelesen werden, weil der Code der
ersten Stufe bei weitem nicht die Intelligenz für ein Dateisystem
mitbringt. <a class="footnote-reference brackets" href="#id2" id="id1">1</a></p>
<p><strong>Installationsmöglichkeiten</strong></p>
<p>Wo findet sich nun Platz für GRUBs <code class="docutils literal notranslate"><span class="pre">core.img</span></code>? Ein FreeBSD-User hat im
wesentlichen drei Möglichkeiten:</p>
<ol class="arabic simple">
<li><p>in einer eigenen, dedizierten Partition (bzw. Slice) ohne Dateisystem
oder sonstigen Inhalt. Dies wird normalerweise bei
GPT-partitionierten Festplatten angewandt und ist wohl die sauberste,
eleganteste Lösung. Bei Festplatten nach dem MBR-Schema könnte man
theoretisch einen eigenen Slice oder sogar eine Unterpartition
innerhalb eines BSD-Labels dafür verwenden, aber so etwas habe ich
noch nie gesehen.</p></li>
<li><p>in dem für Bootcode vorgesehenen Leerraum eines BSD-Labels. Dieser
ist mit 64 kiB leicht groß genug; man hat großzügig in die Zukunft
geplant, obwohl der FreeBSD-eigene Bootcode ja nur 8 kiB umfaßt.
Es macht auch keinen Unterschied, ob die ganze Festplatte
BSD-partitioniert ist (aka dangerously dedicated) oder ob das BSDsche
Partitionierungsschema nur in einen MBR-Slice hineingeschachtelt
wurde, was ja bis vor kurzem der Standardweg für eine
BSD-Installation war.</p></li>
<li><p>im MBR und den folgenden Sektoren einer MBR-partitionierten
Festplatte. Dies ist der Standardweg für die Verwendung von GRUB auf
MBR-Festplatten. Mit Ausnahme des MBR bleibt nämlich die erste Spur
ungenutzt, d. h. wird keinem Slice zugeteilt. Eine Spur umfaßt
meistens 63 Sektoren, d. i. ca. 31 kiB. GRUB ist natürlich so
gestrickt, daß er die fest verplanten Teile des MBR,
Partitionstabelle und Magic number, unangetastet läßt.</p></li>
</ol>
<p>Eigentlich kann das Core image in jedem staubigen Winkel einer
Datenträgerpartitionierung stehen, sofern es sich dort von
vorgeschalteten Bootmanagern nur <em>irgendwie</em> hervorholen läßt.</p>
<p><strong>Bootmöglichkeiten</strong></p>
<p>Und wie genau wird FreeBSD nun von GRUB gebootet? Auch dafür finden sich
drei Möglichkeiten:</p>
<ol class="arabic simple">
<li><p>Chainloading: Wenn der FreeBSD-eigene Bootloader vollständig da ist –
also nicht im obigen Fall 2 – ruft GRUB einfach den Slice bzw. die
GPT-Partition mit diesem Bootloader auf und legt alles weitere
vertrauensvoll in dessen Hände. Das ist der bequemste Weg, und GRUB
bedarf keiner FreeBSD-spezifischen Konfiguration.</p></li>
<li><p>Übergabe an <code class="docutils literal notranslate"><span class="pre">/boot/loader</span></code>: Man könnte dies als halbes Chainloading
bezeichnen. Stufe 1 und 2 des FreeBSD-Bootloaders werden nicht
gebraucht, deshalb verträgt sich diese Methode auch mit dem obigen
Fall 2; die eigentliche Arbeit erledigt aber immer noch der
„<code class="docutils literal notranslate"><span class="pre">loader</span></code>“ von FreeBSD.</p></li>
<li><p>direktes Laden der Systemdateien: GRUB muß nun die ganzen Aufgaben
des FreeBSD-Loaders selbst übernehmen, insbesondere das Verarbeiten
der Konfigurationsdateien <code class="docutils literal notranslate"><span class="pre">device.hints</span></code> und <code class="docutils literal notranslate"><span class="pre">loader.conf</span></code>. Im
einzelnen:</p>
<ul class="simple">
<li><p>den Kernel laden, ggf. mit Kernelparametern z. B. für serielle
Konsole;</p></li>
<li><p>die „früh“ zu ladenden Kernelmodule laden, die sonst in der
<code class="docutils literal notranslate"><span class="pre">loader.conf</span></code> aufgeführt sind, z. B. den NVidia-Grafiktreiber;</p></li>
<li><p>die <code class="docutils literal notranslate"><span class="pre">device.hints</span></code> dem Kernel verabreichen;</p></li>
<li><p>desgleichen für die in der <code class="docutils literal notranslate"><span class="pre">loader.conf</span></code> aufgeführten
Kernel-Umgebungsvariablen und Sysctls.</p></li>
</ul>
</li>
</ol>
<p>Methode 3 ist natürlich die komplizierteste; aber weil sie die größte
Flexibilität bietet, ist sie diejenige, welche bei Ausführung von
<code class="docutils literal notranslate"><span class="pre">grub-mkconfig</span></code> durch die Skripte des FreeBSD-Ports automatisch
eingerichtet wird.</p>
</section>
<section id="konfiguration">
<h2><span class="section-number">1.61.3. </span>Konfiguration<a class="headerlink" href="#konfiguration" title="Link zu dieser Überschrift">¶</a></h2>
<p>Wie oben angegeben, sollte man eine Prä-Konfigurationsdatei
<code class="docutils literal notranslate"><span class="pre">/usr/local/etc/default/grub</span></code> anlegen und dann das Shellskript
aufrufen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grub</span><span class="o">-</span><span class="n">mkconfig</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Anschließend editiert man die erzeugte Datei:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Dabei ist zu beachten, daß <code class="docutils literal notranslate"><span class="pre">grub-mkconfig</span></code> die Datei
schreibgeschützt anlegt. Entweder entfernt man den Schreibschutz
(<code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">u+w</span> <span class="pre">/boot/grub/grub.cfg</span></code>) oder überzeugt den Editor beim
Abspeichern, sie trotzdem zu überschreiben (in vi <code class="docutils literal notranslate"><span class="pre">:w!</span></code>).</div>
<div class="line">Auf die vielfältigen Konfigurationsmöglichkeiten von GRUB2 will ich
hier nicht eingehen; das Internet ist voll von Linux-Dokumentation.
Ich habe u. a. die Teile mit „<code class="docutils literal notranslate"><span class="pre">load_env</span></code>“ und „<code class="docutils literal notranslate"><span class="pre">save_env</span></code>“
eliminiert, weil ich von GRUB das immergleiche Verhalten erwarte und
mir nicht wohl dabei ist, wenn er bei jedem Boot etwas in eine nicht
gemountete Partition schreibt. Die <code class="docutils literal notranslate"><span class="pre">insmod</span></code>-Befehle sind alle
überflüssig, weil GRUB immer von selbst weiß, wann er welches Modul
hinzufügen muß. Die <code class="docutils literal notranslate"><span class="pre">locale</span></code>-Datei, z. B. für „de“, hat im
FreeBSD-Port den Pfad
<code class="docutils literal notranslate"><span class="pre">/usr/local/share/locale/de/LC_MESSAGES/grub.mo</span></code>. Sie soll ggf. nach
<code class="docutils literal notranslate"><span class="pre">/boot/grub/locale/de/LC_MESSAGES/grub.mo</span></code> kopiert werden, dgl. für
andere Sprachen.</div>
<div class="line">Was ich hier beschreibe, sind nur die FreeBSD-spezifischen
<code class="docutils literal notranslate"><span class="pre">menuentry</span></code>-Abschnitte. Statt des einen, der nun schon automatisch
in der <code class="docutils literal notranslate"><span class="pre">grub.cfg</span></code> angelegt wurde, will ich drei Menüeinträge zeigen,
die alle ein und dieselbe FreeBSD-Installation booten, und zwar
entsprechend den oben genannten Möglichkeiten 1, 2 und 3.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>menuentry <span class="s2">&quot;FreeBSD 9.0 (1)&quot;</span> --class freebsd --class bsd --class os <span class="o">{</span>
        <span class="nb">echo</span>            Chainloading slice hd0,2 ...
        chainloader     <span class="o">(</span>hd0,2<span class="o">)</span>+1
<span class="o">}</span>

menuentry <span class="s2">&quot;FreeBSD 9.0 (2)&quot;</span> --class freebsd --class bsd --class os <span class="o">{</span>
        <span class="nb">set</span> <span class="nv">root</span><span class="o">=</span>hd0,2,a
        search --no-floppy --set --fs-uuid 42869b9f5cddfbea
        <span class="nb">echo</span>                    Loading FreeBSD <span class="s1">&#39;&quot;loader&quot;&#39;</span> from <span class="nv">$root</span> ...
        kfreebsd                /boot/loader
<span class="o">}</span>

menuentry <span class="s2">&quot;FreeBSD 9.0 (3)&quot;</span> --class freebsd --class bsd --class os <span class="o">{</span>
        <span class="nb">set</span> <span class="nv">root</span><span class="o">=</span>hd0,2,a
        search --no-floppy --set --fs-uuid 42869b9f5cddfbea
        <span class="nb">echo</span>                    Loading FreeBSD <span class="m">9</span>.0 from <span class="nv">$root</span> ...
        kfreebsd                /boot/kernel/kernel -v
        kfreebsd_module_elf     /boot/modules/nvidia.ko
        kfreebsd_module_elf     /boot/kernel/portalfs.ko
        kfreebsd_loadenv        /boot/device.hints
        <span class="nb">set</span> kFreeBSD.vfs.root.mountfrom<span class="o">=</span>ufs:/dev/ada0s3
        <span class="c1">#set kFreeBSD.vfs.root.mountfrom.options=rw</span>
        <span class="c1">#set kFreeBSD.hint.acpi.0.disabled=&quot;1&quot;</span>
        <span class="nb">set</span> kFreeBSD.debug.acpi.disabled<span class="o">=</span><span class="s2">&quot;timer acad video&quot;</span>
        <span class="nb">set</span> kFreeBSD.kern.hz<span class="o">=</span><span class="m">100</span>
        <span class="nb">set</span> kFreeBSD.hw.pci.do_power_nodriver<span class="o">=</span><span class="m">3</span>
<span class="o">}</span>
</pre></div>
</div>
<p>zu (1): Beim Chainloading braucht man keine Variable <code class="docutils literal notranslate"><span class="pre">$root</span></code>, weil die
Angabe von Partition bzw. Slice im Kommando <code class="docutils literal notranslate"><span class="pre">chainloader</span></code> selbst
erfolgen kann.</p>
<div class="line-block">
<div class="line">zu (2): Die Variable <code class="docutils literal notranslate"><span class="pre">$root</span></code> wird zweimal mit einem Wert belegt, und
zwar einmal ausdrücklich und einmal über das <code class="docutils literal notranslate"><span class="pre">search</span></code>-Kommando.
<code class="docutils literal notranslate"><span class="pre">search</span></code> ist vorzuziehen, sofern man die UUID des Dateisystems weiß,
weil sich die genaue Partitionsbezeichnung „<code class="docutils literal notranslate"><span class="pre">hd0,2,a</span></code>“ bei
Änderung der Partitionierung oder Hinzufügen (in Hardware) eines
weiteren Laufwerks ändern kann. Der ausdrückliche Wert dient nur als
Rückfalloption, falls das <code class="docutils literal notranslate"><span class="pre">search</span></code>-Kommando versagt.</div>
<div class="line">Die UUID erfragt man
mit<code class="docutils literal notranslate"><span class="pre">grub-probe</span> <span class="pre">-t</span> <span class="pre">fs_uuid</span> <span class="pre">-d</span> <span class="pre">/dev/ada0s2</span></code>Die Binärdatei
<code class="docutils literal notranslate"><span class="pre">/boot/loader</span></code> wird überraschenderweise mit demselben Kommando
geladen wie in (3) auch der FreeBSD-Kernel. Man könnte sagen:
<code class="docutils literal notranslate"><span class="pre">/boot/loader</span></code> wird von GRUB als Kernel betrachtet. Wenn der
„<code class="docutils literal notranslate"><span class="pre">loader</span></code>“ dann läuft, erledigt er alle weiteren Aufgaben:
Kernel und Kernelmodule laden, <code class="docutils literal notranslate"><span class="pre">device.hints</span></code> und <code class="docutils literal notranslate"><span class="pre">loader.conf</span></code>
befolgen etc. Auch das Menü zeigt er an.</div>
</div>
<p>zu (3): Beim Laden des Kernels mit <code class="docutils literal notranslate"><span class="pre">kfreebsd</span></code> können dem Kernel
Kommandozeilenoptionen übergeben werden. Folgende werden von GRUB 2.00
erkannt, soweit ich dem Quellcode entnehmen konnte. Weil ich einige
davon nicht verstehe, zitiere ich sie mit den englischen
Textbausteinen:<code class="docutils literal notranslate"><span class="pre">&quot;dual&quot;</span>&#160;&#160;&#160; <span class="pre">'D'</span>&#160;&#160; <span class="pre">&quot;Display</span> <span class="pre">output</span> <span class="pre">on</span> <span class="pre">all</span> <span class="pre">consoles.&quot;</span>
<span class="pre">&quot;serial&quot;</span>&#160; <span class="pre">'h'</span>&#160;&#160; <span class="pre">&quot;Use</span> <span class="pre">serial</span> <span class="pre">console.&quot;</span>
<span class="pre">&quot;askname&quot;</span> <span class="pre">'a'</span>&#160;&#160; <span class="pre">&quot;Ask</span> <span class="pre">for</span> <span class="pre">file</span> <span class="pre">name</span> <span class="pre">to</span> <span class="pre">reboot</span> <span class="pre">from.&quot;</span>
<span class="pre">&quot;cdrom&quot;</span>&#160;&#160; <span class="pre">'C'</span>&#160;&#160; <span class="pre">&quot;Use</span> <span class="pre">CD-ROM</span> <span class="pre">as</span> <span class="pre">root.&quot;</span>
<span class="pre">&quot;config&quot;</span>&#160; <span class="pre">'c'</span>&#160;&#160; <span class="pre">&quot;Invoke</span> <span class="pre">user</span> <span class="pre">configuration</span> <span class="pre">routing.&quot;</span>
<span class="pre">&quot;kdb&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">'d'</span>&#160;&#160; <span class="pre">&quot;Enter</span> <span class="pre">in</span> <span class="pre">KDB</span> <span class="pre">on</span> <span class="pre">boot.&quot;</span>
<span class="pre">&quot;gdb&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">'g'</span>&#160;&#160; <span class="pre">&quot;Use</span> <span class="pre">GDB</span> <span class="pre">remote</span> <span class="pre">debugger</span> <span class="pre">instead</span> <span class="pre">of</span> <span class="pre">DDB.&quot;</span>
<span class="pre">&quot;mute&quot;</span>&#160;&#160;&#160; <span class="pre">'m'</span>&#160;&#160; <span class="pre">&quot;Disable</span> <span class="pre">all</span> <span class="pre">boot</span> <span class="pre">output.&quot;</span>
<span class="pre">&quot;nointr&quot;</span>&#160; <span class="pre">'n'</span>
<span class="pre">&quot;pause&quot;</span>&#160;&#160; <span class="pre">'p'</span>&#160;&#160; <span class="pre">&quot;Wait</span> <span class="pre">for</span> <span class="pre">keypress</span> <span class="pre">after</span> <span class="pre">every</span> <span class="pre">line</span> <span class="pre">of</span> <span class="pre">output.&quot;</span>
<span class="pre">&quot;quiet&quot;</span>&#160;&#160; <span class="pre">'q'</span>
<span class="pre">&quot;dfltroot&quot;'r'</span>&#160;&#160; <span class="pre">&quot;Use</span> <span class="pre">compiled-in</span> <span class="pre">root</span> <span class="pre">device.&quot;</span>
<span class="pre">&quot;single&quot;</span>&#160; <span class="pre">'s'</span>&#160;&#160; <span class="pre">&quot;Boot</span> <span class="pre">into</span> <span class="pre">single</span> <span class="pre">mode.&quot;</span>
<span class="pre">&quot;verbose&quot;</span> <span class="pre">'v'</span>&#160;&#160; <span class="pre">&quot;Boot</span> <span class="pre">with</span> <span class="pre">verbose</span> <span class="pre">messages.&quot;</span></code> Angegeben werden kann
die Langform (<code class="docutils literal notranslate"><span class="pre">-</span></code><code class="docutils literal notranslate"><span class="pre">-verbose</span></code>, unbedingt mit doppeltem Bindestrich!)
oder Kurzform (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) wie beim Kernel oben.</p>
<div class="line-block">
<div class="line">Die gewöhnlichen Kernelmodule <code class="docutils literal notranslate"><span class="pre">*.ko</span></code> lädt man mit
<code class="docutils literal notranslate"><span class="pre">kfreebsd_module_elf</span></code>. GRUB will den vollen Verzeichnispfad, daher
muß man feststellen, ob ein Modul in <code class="docutils literal notranslate"><span class="pre">/boot/modules</span></code> oder
<code class="docutils literal notranslate"><span class="pre">/boot/kernel</span></code> steht.</div>
<div class="line">Es gibt auch einen Befehl <code class="docutils literal notranslate"><span class="pre">kfreebsd_module</span></code> (ohne <code class="docutils literal notranslate"><span class="pre">_elf</span></code>); ich bin
nicht sicher, wozu er dient FIXME, eventuell für nicht ausführbare
Module wie Ramdisk-Images o. ä. Er findet normalerweise keine
Verwendung.</div>
</div>
<p>Mit <code class="docutils literal notranslate"><span class="pre">kfreebsd_loadenv</span></code> liest man eine Datei mit Umgebungsvariablen für
den Kernel ein. Das ist geeignet für <code class="docutils literal notranslate"><span class="pre">device.hints</span></code>, nicht aber für
<code class="docutils literal notranslate"><span class="pre">loader.conf</span></code>. Jene enthält nämlich neben Umgebungsvariablen bzw.
Sysctls noch einige andere Anweisungen:</p>
<ul class="simple">
<li><p>zu ladende Kernelmodule,</p></li>
<li><p>Anweisungen für den FreeBSD-Bootloader selbst, z. B. bzgl. Menü oder
Beastie-Bild,</p></li>
<li><p>Anweisungen für Kerneloptionen, die GRUB ja direkt übergibt, siehe
oben.</p></li>
</ul>
<p>Entweder schreibt man die Umgebungsvariablen und Sysctls also in eine
separate Datei, die man dann wie die <code class="docutils literal notranslate"><span class="pre">device.hints</span></code> einliest:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kfreebsd_loadenv</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">loader</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">rest</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">… oder man setzt sie einzeln mit GRUBs <code class="docutils literal notranslate"><span class="pre">set</span></code>-Befehl. Dazu muß
ihnen ein „<code class="docutils literal notranslate"><span class="pre">kFreeBSD.</span></code>“ (beachte die Großschreibung)
vorangestellt werden.</div>
<div class="line">Im Beispiel oben habe ich zweiteres getan mit einigen Einstellungen,
die u. a. dem
<a class="reference external" href="https://wiki.freebsd.org/TuningPowerConsumption">Energiesparen</a>
dienen.</div>
</div>
<p>Bei verschiedenen Anleitungen im Internet findet sich für die
Pfadangaben in <code class="docutils literal notranslate"><span class="pre">kfreebsd</span></code> und den anderen Befehlen eine Syntax der Art</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kfreebsd</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span><span class="o">@/</span><span class="n">boot</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">kernel</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Was man dort meist verschweigt, ist, daß der Teil vor dem Zeichen „&#64;“
nur für das Dateisystem ZFS gilt. Ein ZPool enthält i. a. mehrere
Verzeichnisbäume, und mit <code class="docutils literal notranslate"><span class="pre">/foo/bar&#64;</span></code> wählt man einen bestimmten
aus, also: Dataset <code class="docutils literal notranslate"><span class="pre">bar</span></code> innerhalb von Dataset <code class="docutils literal notranslate"><span class="pre">foo</span></code> – und dort
bitte den Pfad <code class="docutils literal notranslate"><span class="pre">/boot/kernel/kernel</span></code>!</div>
<div class="line">Für UFS gibt es diese Syntax nicht.</div>
</div>
<p>Wenn etwas schiefläuft und das System so schnell rebootet, daß man die
Fehlermeldung nicht erkennt, hilft ein Befehl‘‘ sleep 7 ‚‘am Ende des
<code class="docutils literal notranslate"><span class="pre">menuentry</span></code>. Damit gewinnt man 7 s Zeit.</p>
</section>
<section id="schlusz">
<h2><span class="section-number">1.61.4. </span>Schluß<a class="headerlink" href="#schlusz" title="Link zu dieser Überschrift">¶</a></h2>
<p>Ist alles vollständig, so wird der Bootcode installiert mit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grub</span><span class="o">-</span><span class="n">install</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ada0</span>
</pre></div>
</div>
<p>… hier z. B. in den MBR – oder mit <code class="docutils literal notranslate"><span class="pre">/dev/ada0s2</span></code> in einen Slice
anstelle des FreeBSD-Bootcodes. Für GRUB-Versionen vor 2.00 beta2 sollte
man die Option -<code class="docutils literal notranslate"><span class="pre">-no-floppy</span></code> angeben, weil sonst auch nach einer
Floppy gesucht wird, was die Installation verlangsamt und u. U. sogar
blockiert.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Einen Wunsch noch: Könnte jemand dieses HowTo bzgl. der anderen BSDs
ergänzen? Was, außer dem einfachen Umschreiben der Befehle
(<code class="docutils literal notranslate"><span class="pre">kfreebsd--&gt;knetbsd</span></code>), ist dafür notwendig?</p>
</div>
<p>Wenn man GRUB erst einmal beherrscht, kann man richtig abgehobene Sachen damit
machen, z. B.  Boot übers Netzwerk oder aus einem Image. Der Grund, GRUB
einzusetzen, sind ja gerade die exotischen Setups, die der FreeBSDsche
Bootloader nicht kann.</p>
<p>Viel Spaß beim Experimentieren!</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Linux-Dateisysteme lassen, im Gegensatz etwa zu FreeBSDs UFS, den
ersten Block einer Partition für die erste Stufe eines Bootloaders
frei. Dort, statt im MBR, kann die erste Stufe von GRUB untergebracht
werden und so eingerichtet, daß sie die Datei <code class="docutils literal notranslate"><span class="pre">core.img</span></code> über
Blocklists aus der Partition herausliest, ohne das Dateisystem zu
verstehen. So funktionierte auch der gute alte LILO. Natürlich darf
diese Datei dann in Linux nicht verschoben oder irgendwie manipuliert
werden, ohne GRUB jedesmal zu aktualisieren, weshalb diese Methode
fehleranfällig ist.</p>
</dd>
</dl>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2021-05-24</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ibm_thinkpad_bios-update.txt.html" class="btn btn-neutral float-right" title="1.62. IBM Thinkpad BIOS-Update" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="grafikausgabe_im_netzwerk.txt.html" class="btn btn-neutral float-left" title="1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, BSDForen.de

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
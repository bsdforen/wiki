

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.150. Zeit synchronisieren mit ntp &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.151. ZFS auf FreeBSD" href="zfs.txt.html" />
    <link rel="prev" title="1.149. Xorg Konfigurieren" href="xorg_config.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl-router.txt.html">1.37. DSL-Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.38. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.39. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.40. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.41. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.42. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.43. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.44. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.45. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.46. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.47. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.48. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.49. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.50. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_pefs.txt.html">1.51. Festplattenverschlüsselung mit pefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.52. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.53. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.54. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.55. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.56. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.57. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.58. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.59. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.60. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.61. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="grub2-anleitung.txt.html">1.62. GRUB2-Anleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.63. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.64. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.65. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.66. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.67. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-erstellung_openbsd.txt.html">1.68. ISO-Erstellung (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.69. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.70. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.71. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.72. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.73. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.74. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.75. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.76. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.77. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.78. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.79. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.80. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.81. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.82. Majordomo Postfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="make.conf_optimieren.txt.html">1.83. make.conf optimieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.84. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.85. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.86. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.87. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.88. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.89. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.90. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.91. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.92. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.93. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.94. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.95. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="openvpn_als_tunnel_zum_eigenen_netzwerk.txt.html">1.96. OpenVPN als Tunnel zum eigenen Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.97. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.98. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.99. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.100. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.101. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.102. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.103. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.104. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.105. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.106. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.107. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.108. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.109. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.110. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.111. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.112. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.113. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.114. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.115. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.116. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.117. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="strato_mr2_openbsd.txt.html">1.118. Strato MR2 (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.119. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.120. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.121. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.122. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.123. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.124. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.125. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.126. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.127. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.128. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.129. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.130. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.131. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.132. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.133. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.134. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.135. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.136. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_bootfaehig_machen_openbsd.txt.html">1.137. USB-Stick bootfähig machen (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.138. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.139. USB-Stick Unterstützung</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_automount_ohne_hal.txt.html">1.140. USB Automount ohne HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.141. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.142. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.143. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.144. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.145. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.146. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.147. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.148. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.149. Xorg Konfigurieren</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.150. Zeit synchronisieren mit ntp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#einleitung">1.150.1. Einleitung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#voraussetzung">1.150.2. Voraussetzung</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cmos-uhr-auf-utc-modus-stellen">1.150.2.1. CMOS-Uhr auf UTC-Modus stellen</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ntpd-auswahlen">1.150.3. ntpd auswählen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#openntp">1.150.3.1. OpenNTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#freebsd-ntpd">1.150.3.2. FreeBSD ntpd</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#openntpd">1.150.4. OpenNTPD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation-von-openntpd">1.150.4.1. Installation von OpenNTPD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#konfiguration-von-openntp">1.150.4.2. Konfiguration von OpenNTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#konfiguration-von-openntp-als-server">1.150.4.3. Konfiguration von OpenNTP als Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aktivieren-von-openntp">1.150.4.4. Aktivieren von OpenNTP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#freebsd-ntpd-1">1.150.5. FreeBSD ntpd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#konfiguration-von-ntpd">1.150.5.1. Konfiguration von ntpd</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#anmerkungen">1.150.6. Anmerkungen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setzen-einer-ganz-falsch-gehenden-systemuhr">1.150.6.1. Setzen einer ganz falsch gehenden Systemuhr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fehlersuche-bei-ntpd">1.150.7. Fehlersuche bei ntpd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#die-parameter-haben-folgende-bedeutung">1.150.8. Die Parameter haben folgende Bedeutung:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hintergrundinformationen-echtzeituhren-im-betriebssystem">1.150.9. Hintergrundinformationen: Echtzeituhren im Betriebssystem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cmos-uhr">1.150.9.1. CMOS-Uhr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#betriebssystem-uhr">1.150.9.2. Betriebssystem-Uhr</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.151. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.152. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.150. </span>Zeit synchronisieren mit ntp</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/howto/zeit_synchronisieren_mit_ntp.txt.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="zfs.txt.html" class="btn btn-neutral float-right" title="1.151. ZFS auf FreeBSD" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="xorg_config.txt.html" class="btn btn-neutral float-left" title="1.149. Xorg Konfigurieren" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="zeit-synchronisieren-mit-ntp">
<h1><span class="section-number">1.150. </span>Zeit synchronisieren mit ntp<a class="headerlink" href="#zeit-synchronisieren-mit-ntp" title="Link zu dieser Überschrift">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd3.png" src="../_images/logo-freebsd3.png" />
</div>
<p>Echtzeituhren eines modernen PCs haben teilweise eine geringere Genauigkeit als
beispielsweise eine Werbegeschenk-Armbanduhr.  Dieser Artikel beschreibt den
automatischen Abgleich der Systemuhr.</p>
<div class="section" id="einleitung">
<h2><span class="section-number">1.150.1. </span>Einleitung<a class="headerlink" href="#einleitung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Anstatt die Zeit beim Starten des Rechners oder via eines Cron-Jobs
einzustellen, hat die hier beschriebene Lösung folgende Vorteile:</p>
<ul class="simple">
<li><p>ntpd und ntpdate sind im Gegensatz z.B. zu rdate Basisfunktionen von
FreeBSD</p></li>
<li><p>ntp basiert auf RFC958 (und neuere), was sich anscheinend im
Gegensatz zu RFC868 (rdate) durchzusetzen scheint.</p></li>
<li><p>ntp berücksichtigt die Laufzeitwege der IP-Pakete und korrigiert
diese</p></li>
<li><p>ntpd muss nicht via Cron aufgerufen werden und kümmert sich selbst um
alles</p></li>
<li><p>ntpd nutzt spezielle Mechanismen von FreeBSD wie Software-PLL, womit
sogar die Geschwindigkeit der System-Uhr korrigiert wird. Ein ntp
synchronisierter Rechner ist daher auch dann noch genau, auch wenn er
keinen Kontakt mehr zum Zeitquellenserver hat.</p></li>
<li><p>ntp 4 hat eine Genauigkeit von 10 Millisekunden über das öffentliche
Internet und bis zu 200 Mikrosekunden über ein lokales Netzwerk</p></li>
</ul>
<p>Bei der Verwendung von ntpd entscheidet ntpd selbst, wann und wie oft er
sich gegen den Zeitserver synchronisieren muss. Da ntpd selbst den
einstellbaren Zeitgeber (Software-PLL) überwacht und korrigiert, kann er
selbst anhand des gemessenen Fehlers abschätzen, wann es notwendig ist,
die Uhrzeit zu synchronisieren. Ausserdem geschieht das Verändern der
Systemzeit nur in notwendigen Fällen und sanft.</p>
</div>
<div class="section" id="voraussetzung">
<h2><span class="section-number">1.150.2. </span>Voraussetzung<a class="headerlink" href="#voraussetzung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Gerade durch die (sinnlose) Uhrzeitumstellung auf Sommer- oder
Winterzeit kommt es vor, dass ntpd (FreeBSD ntpd und OpenNTPD)
durcheinanderkommt. In vielen FreeBSD-Installationen läuft die CMOS-Uhr
des Rechners auf lokaler Uhrzeit (Standard bei der Installation) und
nicht auf UTC. Dieser Modus ist eigentlich nur dazu da, wenn man noch
ein Windows-Betriebssystem parallel auf dem gleichen Rechner verwendet.
(Hintergrundinformationen sind im Anhang dieses Artikels zu finden)</p>
<p>Während bei der UTC-Einstellung FreeBSD immer davon ausgehen kann, dass
die Uhr auf UTC läuft und keine Sommerzeitumstellungen mitgemacht hat,
ist es sich bei dem anderen Modus nicht sicher. Es scheint sogar davon
auszugehen, dass Windows die Zeitumstellung vornimmt. Gerade bei
Maschinen, die nicht während der Zeitumstellung laufen - also morgens
eingeschaltet werden - führt das zu Problemen.</p>
<p>Bei Systemen, bei denen nur FreeBSD (oder Linux, Solaris im UTC-Modus)
installiert ist, empfiehlt es sich die CMOS-Uhr auf UTC laufen zu
lassen, um solchen Problemem schon im Vorfeld aus dem Weg zu gehen.</p>
<div class="section" id="cmos-uhr-auf-utc-modus-stellen">
<h3><span class="section-number">1.150.2.1. </span>CMOS-Uhr auf UTC-Modus stellen<a class="headerlink" href="#cmos-uhr-auf-utc-modus-stellen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Das Betriebssystem erkennt an dem Vorhandensein der Datei
<code class="docutils literal notranslate"><span class="pre">/etc/wall_cmos_clock</span></code>, dass die CMOS-Uhr auf lokaler Zeit läuft.
Daher wird diese Datei gelöscht, damit die CMOS-Uhr danach auf UTC
läuft.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">wall_cmos_clock</span>
</pre></div>
</div>
<p>Nach einem Betriebssystemneustart ist diese Einstallung wirksam, wobei
durch die veränderte Interpretation der CMOS-Uhr die Uhrzeit nun um eine
oder zwei Stunden falsch geht. Das kann z.B. mit
<code class="docutils literal notranslate"><span class="pre">ntpdate</span> <span class="pre">de.pool.ntp.org</span></code> schnell korrigiert werden.</p>
</div>
</div>
<div class="section" id="ntpd-auswahlen">
<h2><span class="section-number">1.150.3. </span>ntpd auswählen<a class="headerlink" href="#ntpd-auswahlen" title="Link zu dieser Überschrift">¶</a></h2>
<p>Im ersten Schritt soll abegwägt werden, welche ntpd verwendet werden
soll. Es ist möglich den mitgelieferten ntpd von FreeBSD oder den von
OpenNTP zu nutzen. Dieser Artikel deckt die Konfiguration beider Systeme
ab, es darf aber nur einer installiert werden.</p>
<div class="section" id="openntp">
<h3><span class="section-number">1.150.3.1. </span>OpenNTP<a class="headerlink" href="#openntp" title="Link zu dieser Überschrift">¶</a></h3>
<p>Im Gegensatz zu dem FreeBSD ntpd wurde dieser neu entwickelt. Hier wurde
besonders Wert auf Quelltext-Sauberkeit und Zuverlässigkeit gelegt
gelegt, was vorrang vor dem Erreichen der letzten Mikrosekunde
Genauigkeit hat. In der Praxis ist die Genauigkeit bei normalen
Internetverbindungen (40 ms Latanz) wie auch bei dem FreeBSD ntpd bei
rund einer Millisekunde, was für nahezu alle Anwendungszwecke ausreichen
sollte. Im Gegensatz aber zum FreeBSD verliert OpenNTP seine Zeitservern
nicht auch bei vielen Internetverbindungsproblemen und sorgt stets für
korrekte Zeit. In fast allen Fällen sollte daher OpenNTP die bessere
Wahl sein, auch wenn dieser nicht Teil des Betriebssystems ist und
nachinstalliert werden muss.</p>
</div>
<div class="section" id="freebsd-ntpd">
<h3><span class="section-number">1.150.3.2. </span>FreeBSD ntpd<a class="headerlink" href="#freebsd-ntpd" title="Link zu dieser Überschrift">¶</a></h3>
<p>Der ntpd von FreeBSD ist über viele Jahre durch viele Personen auf
höchste Genauigkeit optimiert, wodurch die Stabilität und
Quelltextqualität etwas in Mitleidenschaft gezogen wurde. Dieser ntpd
sollte nur verwendet werden, wenn eine ständige Verbindung zu den
ntp-Servern besteht (also keine Wählverbindung wie z.B. DSL oder ein
NAT-Gateway), denn auf Verbindungswechsel reagiert der ntpd nicht
sonderlich gut und verliert seine Verbindungen zu den ntp-Servern
dauerhaft ohne dies ins Syslog zu vermerken. Der Wechsel von
Sommer/Winterzeit ist auch nicht der beste Freund von diesem ntpd. Der
notwendige Workaround ist weiter unten im Artikel beschrieben.</p>
</div>
</div>
<div class="section" id="openntpd">
<h2><span class="section-number">1.150.4. </span>OpenNTPD<a class="headerlink" href="#openntpd" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="installation-von-openntpd">
<h3><span class="section-number">1.150.4.1. </span>Installation von OpenNTPD<a class="headerlink" href="#installation-von-openntpd" title="Link zu dieser Überschrift">¶</a></h3>
<p>Über die Ports</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">ports</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">openntpd</span>
<span class="n">make</span> <span class="n">install</span> <span class="n">clean</span>
</pre></div>
</div>
<p>Oder als Package</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pkg_add</span> <span class="o">-</span><span class="n">r</span> <span class="n">openntpd</span>
</pre></div>
</div>
<p>OpenNTPD hat keine abhängigen Pakete und ist insgesamt sehr sparsam mit
Speicherplatz.</p>
</div>
<div class="section" id="konfiguration-von-openntp">
<h3><span class="section-number">1.150.4.2. </span>Konfiguration von OpenNTP<a class="headerlink" href="#konfiguration-von-openntp" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Konfiguration befindet sich in der Datei
<code class="docutils literal notranslate"><span class="pre">/usr/local/etc/ntpd.conf</span></code> und hat beispielsweise folgenden Inhalt.
Die Auslieferungszustand kann hier z.B. direkt übernommen werden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># $OpenBSD: ntpd.conf,v 1.7 2004/07/20 17:38:35 henning Exp $</span>
<span class="c1"># sample ntpd configuration file, see ntpd.conf(5)</span>

<span class="c1"># Addresses to listen on (ntpd does not listen by default)</span>
<span class="c1">#listen on *</span>
<span class="c1">#listen on 127.0.0.1</span>
<span class="c1">#listen on ::1</span>

<span class="c1"># sync to a single server</span>
<span class="c1">#server ntp.example.org</span>

<span class="c1"># use a random selection of 8 public stratum 2 servers</span>
<span class="c1"># see http://twiki.ntp.org/bin/view/Servers/NTPPoolServers</span>
<span class="n">servers</span> <span class="n">pool</span><span class="o">.</span><span class="n">ntp</span><span class="o">.</span><span class="n">org</span>
</pre></div>
</div>
<p>&lt;note important&gt; Es kursieren einige Beispielkonfigurationen mit festen
IPs oder Adressen von ntp-Servern. Diese bitte auf keinen Fall benutzen.
Teilweise kann es sich um Server handeln, die für die öffentliche
Nutzung nicht vorgesehen sind. Es gibt alternative Pool-Adressen. Dort
wird ein legaler Server dem System zugewiesen. Dies sind z.B.
<strong>pool.ntp.org</strong>, aber auch <strong>de.pool.ntp.org</strong>. &lt;/note&gt;</p>
</div>
<div class="section" id="konfiguration-von-openntp-als-server">
<h3><span class="section-number">1.150.4.3. </span>Konfiguration von OpenNTP als Server<a class="headerlink" href="#konfiguration-von-openntp-als-server" title="Link zu dieser Überschrift">¶</a></h3>
<p>Um den OpenNTPD als Zeit-Server im netzwerk zur verfügung zu stellen,
muß lediglich die zeile <code class="docutils literal notranslate"><span class="pre">listen</span> <span class="pre">on</span> <span class="pre">*</span></code> in der ntpd.conf auskommentiert
werden. Anschließend nicht vergessen den dienst neu zu starten. Soll der
openntpd dienst nur auf einem bestimmten Interface zur verfügung stehen,
die entsprechende IP angeben.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># $OpenBSD: ntpd.conf,v 1.7 2004/07/20 17:38:35 henning Exp $</span>
<span class="c1"># sample ntpd configuration file, see ntpd.conf(5)</span>

<span class="c1"># Addresses to listen on (ntpd does not listen by default)</span>
<span class="n">listen</span> <span class="n">on</span> <span class="o">*</span>
<span class="c1">#listen on 127.0.0.1</span>
<span class="c1">#listen on ::1</span>

<span class="c1"># sync to a single server</span>
<span class="c1">#server ntp.example.org</span>

<span class="c1"># use a random selection of 8 public stratum 2 servers</span>
<span class="c1"># see http://twiki.ntp.org/bin/view/Servers/NTPPoolServers</span>
<span class="n">servers</span> <span class="n">pool</span><span class="o">.</span><span class="n">ntp</span><span class="o">.</span><span class="n">org</span>
</pre></div>
</div>
</div>
<div class="section" id="aktivieren-von-openntp">
<h3><span class="section-number">1.150.4.4. </span>Aktivieren von OpenNTP<a class="headerlink" href="#aktivieren-von-openntp" title="Link zu dieser Überschrift">¶</a></h3>
<p>Aktiviert wird OpenNTPD wie bei FreeBSD typisch mit folgendem Eintrag in
der Datei <strong>``/etc/rc.conf.local``</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openntpd_enable</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
<span class="n">openntpd_flags</span><span class="o">=</span><span class="s2">&quot;-s&quot;</span>
</pre></div>
</div>
<p>Gerade bei Rechnern, die nicht rund um die Uhr laufen, ist es sinnvoll
größere Abweichungen beim Systemstart sofort per Sprung setzen zu
lassen, da eine fließende Korrektur mit <em>adjtime()</em> Stunden dauern kann.
Die Option <em>„-s“</em> sorgt dafür, dass Abweichungen größer als 180 Sekunden
sofort korrigiert werden beim Systemstart - danach wird wieder
<em>adjtime()</em> verwendet.</p>
</div>
</div>
<div class="section" id="freebsd-ntpd-1">
<span id="id1"></span><h2><span class="section-number">1.150.5. </span>FreeBSD ntpd<a class="headerlink" href="#freebsd-ntpd-1" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="konfiguration-von-ntpd">
<h3><span class="section-number">1.150.5.1. </span>Konfiguration von ntpd<a class="headerlink" href="#konfiguration-von-ntpd" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Konfiguration befindet sich in der Datei <code class="docutils literal notranslate"><span class="pre">/etc/ntp.conf</span></code> und hat
beispielsweise folgenden Inhalt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="n">ptbtime1</span><span class="o">.</span><span class="n">ptb</span><span class="o">.</span><span class="n">de</span> <span class="n">prefer</span>
<span class="n">server</span> <span class="n">ptbtime2</span><span class="o">.</span><span class="n">ptb</span><span class="o">.</span><span class="n">de</span>
<span class="n">server</span> <span class="n">de</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">ntp</span><span class="o">.</span><span class="n">org</span>
<span class="n">tinker</span> <span class="n">panic</span> <span class="mi">4000</span>
<span class="n">driftfile</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">ntp</span><span class="o">.</span><span class="n">drift</span>
</pre></div>
</div>
<p>In diesem Fall wird der erste Zeitserver der Physikalisch Technischen
Bundesanstalt (ptbtime1) als glaubwürdigste Quelle deklariert für den
Fall, falls nptd selbst nicht wegen starker Abweichung aus den drei
angegebenen Zeitquellen die verlässlichste ermitteln kann. Die PTB
übermittelt die „gesetzliche Zeit“.</p>
<p>Normalerweise setzt ntpd die lokale Uhrzeit nur, wenn diese weniger als
1000 Sekunden von der Uhrzeit der Zeitserver abweicht. Die Option
„tinker panic 4000“ setzt den Standardwert auf 4000 Sekunden hoch, was
etwas mehr als eine Stunde ist. Dies korrigiert das Problem, dass wenn
ntpd nicht während der Zeitumstellung (Winter-/Sommerzeit) aktiv war,
danach das Setzen der Uhrzeit verweigert, da er einen Unterschied von
großer als 1000 Sekunden erkennen würde.</p>
<p>Also für alle Rechner, die nachts evtl. auch mal ausgeschaltet sein
können, ist diese Einstellung ratsam, da ntpd damit leider sonst nicht
klarkommt und die Uhrzeit nicht mehr setzt, obwohl es in dem Augenblick
wirklich sinnvoll wäre.</p>
<p>Die Fehlermeldung sieht so aus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Oct</span> <span class="mi">31</span> <span class="mi">14</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">24</span> <span class="n">box</span> <span class="n">ntpd</span><span class="p">[</span><span class="mi">67238</span><span class="p">]:</span> <span class="n">ntpd</span> <span class="mf">4.2</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">a</span> <span class="n">Tue</span> <span class="n">Jul</span> <span class="mi">11</span> <span class="mi">12</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">49</span> <span class="n">CEST</span> <span class="mi">2006</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Oct</span> <span class="mi">31</span> <span class="mi">14</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">14</span> <span class="n">box</span> <span class="n">ntpd</span><span class="p">[</span><span class="mi">67238</span><span class="p">]:</span> <span class="n">time</span> <span class="n">correction</span> <span class="n">of</span> <span class="o">-</span><span class="mi">3599</span> <span class="n">seconds</span> <span class="n">exceeds</span> <span class="n">sanity</span> <span class="n">limit</span> <span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="nb">set</span> <span class="n">clock</span> <span class="n">manually</span> <span class="n">to</span> <span class="n">the</span> <span class="n">correct</span> <span class="n">UTC</span> <span class="n">time</span><span class="o">.</span>
</pre></div>
</div>
<div class="section" id="aktivieren-von-ntpd">
<h4><span class="section-number">1.150.5.1.1. </span>Aktivieren von ntpd<a class="headerlink" href="#aktivieren-von-ntpd" title="Link zu dieser Überschrift">¶</a></h4>
<p>In die Datei /etc/rc.conf muss folgende Zeile hinzugefügt werden
ntpd_enable=“YES“</p>
</div>
</div>
</div>
<div class="section" id="anmerkungen">
<h2><span class="section-number">1.150.6. </span>Anmerkungen<a class="headerlink" href="#anmerkungen" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="setzen-einer-ganz-falsch-gehenden-systemuhr">
<h3><span class="section-number">1.150.6.1. </span>Setzen einer ganz falsch gehenden Systemuhr<a class="headerlink" href="#setzen-einer-ganz-falsch-gehenden-systemuhr" title="Link zu dieser Überschrift">¶</a></h3>
<p>Dieses Kapitel bespricht den Sonderfall, wenn die Systemuhr des Rechners
absolut falsche Werte liefert. Die Ursache dafuer kann z.B. eine leere
oder nicht vorhandenen CMOS-Pufferbatterien wie z.B. enbedded Systemen
sein. Hierzu kann ntpd mit der folgenden Option in der <strong>/etc/rc.conf</strong>
dazu veranlasst werden, dass beim ersten Start in jedem Fall die lokale
Urzeit gesetzt wird und erst nach dem ersten Setzen die weiter oben
vorgestellte Panic-Zeit beachtet wird.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ntpd_flags</span><span class="o">=</span><span class="s2">&quot;-g&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Anmerkung:</span></code> Die „-g“-Option kann dazu führen, dass ntpd die
Systemzeit nur beim ersten Mal setzt oder gar nicht mehr. ntpd hat
hiermit ein etwas unvorhersagbares und der Dokumentation
widersprechendes Verhalten, daher sollte das möglichst nicht verwendet
werden.</p>
<p>Die rc.conf-Einstellung ntpd_sync_on_start=“YES“ soll den gleichen Zweck
haben, funktioniert aber nicht (getestet FreeBSD 5.5 und FreeBSD
Prerelease 6.2).</p>
</div>
</div>
<div class="section" id="fehlersuche-bei-ntpd">
<h2><span class="section-number">1.150.7. </span>Fehlersuche bei ntpd<a class="headerlink" href="#fehlersuche-bei-ntpd" title="Link zu dieser Überschrift">¶</a></h2>
<p>Gerade der ntpd von FreeBSD neigt dazu, nach einiger Zeit bei nicht
immer vorhandener Verbindung zu den Zeit-Servern die Verbindung zu
verlieren. Mit folgendem Befehl können Informationen abgefragt werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="nd">@host</span><span class="p">:[</span><span class="o">~</span><span class="p">]</span><span class="o">%</span> <span class="n">ntpq</span> <span class="o">-</span><span class="n">p</span>
     <span class="n">remote</span>           <span class="n">refid</span>      <span class="n">st</span> <span class="n">t</span> <span class="n">when</span> <span class="n">poll</span> <span class="n">reach</span>   <span class="n">delay</span>   <span class="n">offset</span>  <span class="n">jitter</span>
<span class="o">==============================================================================</span>
<span class="o">*</span><span class="n">ptbtime1</span><span class="o">.</span><span class="n">ptb</span><span class="o">.</span><span class="n">de</span> <span class="o">.</span><span class="n">PTB</span><span class="o">.</span>            <span class="mi">1</span> <span class="n">u</span>  <span class="mi">300</span> <span class="mi">1024</span>  <span class="mi">377</span>   <span class="mf">67.547</span>   <span class="o">-</span><span class="mf">1.374</span>   <span class="mf">3.255</span>
<span class="o">+</span><span class="n">ptbtime2</span><span class="o">.</span><span class="n">ptb</span><span class="o">.</span><span class="n">de</span> <span class="o">.</span><span class="n">PTB</span><span class="o">.</span>            <span class="mi">1</span> <span class="n">u</span>  <span class="mi">271</span> <span class="mi">1024</span>  <span class="mi">377</span>   <span class="mf">65.997</span>   <span class="o">-</span><span class="mf">1.313</span>   <span class="mf">1.541</span>
<span class="o">+</span><span class="n">draisine</span><span class="o">.</span><span class="n">zs64</span><span class="o">.</span><span class="n">n</span> <span class="mf">192.53</span><span class="o">.</span><span class="mf">103.104</span>   <span class="mi">2</span> <span class="n">u</span>  <span class="mi">426</span> <span class="mi">1024</span>  <span class="mi">377</span>   <span class="mf">58.800</span>    <span class="mf">2.449</span>   <span class="mf">3.648</span>
</pre></div>
</div>
<p>Hier werden alle Zeit-Server aufgelistet, zu denen Kontakt besteht. Ist
diese Liste beim FreeBSD-ntpd mehrfach leer, sollte auf OpenNTPD
gewechselt werden.</p>
</div>
<div class="section" id="die-parameter-haben-folgende-bedeutung">
<h2><span class="section-number">1.150.8. </span>Die Parameter haben folgende Bedeutung:<a class="headerlink" href="#die-parameter-haben-folgende-bedeutung" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Remote</span></code>: Name oder IP des entfernten Zeit-Servers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refid</span></code>: Die Quelle, von dem der entfernte Zeit-Server selbst seine
Zeit bezieht. „.PTB.“ ist direkt die Atomuhr, während in dem Beispiel
der letzte Zeit-Server seine Zeit über Netzwerk holt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">st</span></code>: Stratum. Das beschreibt die Hierarchieebene des Zeit-Servers,
d.h. über wie viele Zeitserver wird die Zeitinformation bis zu diesem
Verbreitet. Stratum 1 bedeutet hier z.B., dass der Zeit-Server seine
Zeit direkt von der Atomuhr holt, während Stratum 2 (draisine…)
seine Zeit erst von einem weiteren Zeit-Server mit Verbindung zur
Atomuhr holt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">when</span></code>: Letzte Abfrage des Zeitservers in Sekunden</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poll</span></code>: Von ntpd selbst gewähltes Intervall, in dem
Zeitinformationen abgeholt werden. Steigt das Vertrauen von ntpd in
die Systemuhr, deren Drift ntpd selbst korrigiert, dann ist es nicht
notwendig so oft den Zeitserver zu befragen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reach</span></code>: Erreichbarkeit des Zeitservers. Hier wird im Grund eine 1
Durchgeshiftet. 377 bedeutet, dass der Timeserver immer erreichbar
war.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code>: Ist die durchschnittliche Paketlaufzeit zum Zeit-Server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: Differenz zwischen der lokalen Uhr und dem Zeit-Server.
Trotz Paketlaufzeiten von 60ms werden durch das intelligente
Protokoll Geneuigkeiten von ein paar Millisekunden erreicht.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jitter</span></code>: Laufzeitdifferenzen der Anfragen an den Zeitserver. Im
Gegensatz zu den Laufzeiten stört dieser Faktor die Genauigkeit der
Uhrzeitsynchronisation. Eine ständig stark wechselnd belastete
Internetverbindung verschlechtert diesen Wert z.B. .</p></li>
</ul>
</div>
<div class="section" id="hintergrundinformationen-echtzeituhren-im-betriebssystem">
<h2><span class="section-number">1.150.9. </span>Hintergrundinformationen: Echtzeituhren im Betriebssystem<a class="headerlink" href="#hintergrundinformationen-echtzeituhren-im-betriebssystem" title="Link zu dieser Überschrift">¶</a></h2>
<p>In jedem Computer gibt es zwei Arten von Echtzeituhren:</p>
<div class="section" id="cmos-uhr">
<h3><span class="section-number">1.150.9.1. </span>CMOS-Uhr<a class="headerlink" href="#cmos-uhr" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die CMOS-Uhr (aka Hardware-Clock), die batteriegepuffert auch im
ausgeschaltetem Zustand mehr oder weniger richtig läuft, ist auf dem
Mainboard in der Hardware integriert. Wenn die Batterie (früher Akku)
leer ist oder wie z.B. bei Enbedded-Geräten ganz fehlt, dann läuft die
Uhr im ausgeschaltetem Zustand gar nicht weiter und beim booten hat man
immer ein Standard-Datum, das das BIOS-Post beim zurücksetzen des CMOS
dort hineinschreibt (weg. CMOS Checksum Error). Die Zeitdarstellung
dieser Uhr ist ähnlich einem klassischem Datum aufgebaut (z.B. 19.10.06
22:36:22) und die kleinste Einheit ist die Sekunden. Die CMOS-Uhr hat
einen eigenen Kalender.</p>
</div>
<div class="section" id="betriebssystem-uhr">
<h3><span class="section-number">1.150.9.2. </span>Betriebssystem-Uhr<a class="headerlink" href="#betriebssystem-uhr" title="Link zu dieser Überschrift">¶</a></h3>
<div class="line-block">
<div class="line">Fast alle Betriebssysteme haben eine interne Software-Echtzeituhr, die
das Betriebssystem beim Systemstart nach der CMOS-Uhr stellt. Danach
läuft die Betriebssystem-Uhr unabhängig weiter, denn die Zeit wird vom
Betriebssystem weitergezählt, wobei bei einfachen Betriebssystemen der
Timer-Interrupt den Takt angibt. Das Betriebssystem ermöglicht
komplexen Zugriff auf die interne Uhr unter berücksichtugung eines
Betriebssystem-Kalenders und der Zeitzone.</div>
<div class="line">Bei FreeBSD läuft die interne Kernel-Time immer auf UTC, erst die
Zugriffe über die Systemcalls rechnen die Zeit in die in der Datei
<code class="docutils literal notranslate"><span class="pre">/etc/localtime</span></code> eingestellten Zeitzone um.</div>
<div class="line">Die Auflösung der Betriebssystemuhr ist weit unter einer Sekunde im
Gegensatz zur CMOS-Uhr. FreeBSD hat eine sehr weit entwickelte
hochauflösende Systemuhr, bei der sogar die Taktgeberfrequenz im
Betrieb korrigiert werden kann (Software-PLL). ntpd nutzt diese
Eigenschaft aus und korrigiert neben der Uhrzeit auch die
Taktgeberfrequenz, so dass die Uhr sogar deutlich exakter als sonst
weiterlaufen würde, selbst wenn nptd diese nicht mehr synchronisieren
kann (z.B. wegen fehlender Internetverbindung). Ausserdem scheint
FreeBSD nicht nur den Timer-Interrupt als Taktgeber zu nutzen, sondern
auch diverse andere Interrupts, wobei er deren Qualität
berücksichtigt.</div>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2020-11-23</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="zfs.txt.html" class="btn btn-neutral float-right" title="1.151. ZFS auf FreeBSD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="xorg_config.txt.html" class="btn btn-neutral float-left" title="1.149. Xorg Konfigurieren" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, BSDForen.de

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
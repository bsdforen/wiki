

<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1.50. Festplattenverschlüsselung mit pefs &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.51. Film-DVD erstellen" href="film-dvd_erstellen.txt.html" />
    <link rel="prev" title="1.49. Festplattenverschlüsselung mit NetBSD" href="festplattenverschluesselung_mit_netbsd.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.37. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.38. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.39. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.40. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.41. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.42. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.43. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.44. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.45. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.46. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.47. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.48. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.49. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.50. Festplattenverschlüsselung mit pefs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vorteile-gegenuber-anderen-verschlusselungsmethoden">1.50.1. Vorteile gegenüber anderen Verschlüsselungsmethoden</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vorgehen">1.50.2. Vorgehen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vorsichtsmasznahmen">1.50.3. Vorsichtsmaßnahmen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">1.50.4. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#home-vorbereiten">1.50.5. $HOME vorbereiten</a></li>
<li class="toctree-l3"><a class="reference internal" href="#daten-auf-das-verschlusselte-home-kopieren">1.50.6. Daten auf das verschlüsselte $HOME kopieren</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pam-vorbereiten">1.50.7. PAM vorbereiten</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testen-des-logins">1.50.8. Testen des Logins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.51. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.52. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.53. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.54. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.55. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.56. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.57. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.58. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.59. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="grub2-anleitung.txt.html">1.61. GRUB2-Anleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.62. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.63. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.64. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.65. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.66. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.67. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.68. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.69. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.70. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.71. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.72. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.73. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.74. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.75. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.76. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.77. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.78. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.79. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.80. Majordomo Postfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="make.conf_optimieren.txt.html">1.81. make.conf optimieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.82. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.83. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.84. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.85. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.86. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.87. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.88. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.89. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.90. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.91. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.92. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.93. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="openvpn_als_tunnel_zum_eigenen_netzwerk.txt.html">1.94. OpenVPN als Tunnel zum eigenen Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.95. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.96. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.97. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.98. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.99. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.100. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.101. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.102. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.103. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.104. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.105. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.106. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.107. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.108. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.109. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.110. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.111. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.112. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.113. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.114. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.115. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.116. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.117. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.118. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.119. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.120. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.121. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.122. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.123. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.124. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.125. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.126. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.127. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.128. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.129. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.130. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.131. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.132. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.133. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.134. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.135. USB-Stick Unterstützung</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_automount_ohne_hal.txt.html">1.136. USB Automount ohne HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.137. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.138. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.139. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.140. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.141. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.142. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.143. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.144. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.145. Xorg Konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeit_synchronisieren_mit_ntp.txt.html">1.146. Zeit synchronisieren mit ntp</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.147. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.148. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.50. </span>Festplattenverschlüsselung mit pefs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/howto/festplattenverschluesselung_mit_pefs.txt.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="festplattenverschlusselung-mit-pefs">
<h1><span class="section-number">1.50. </span>Festplattenverschlüsselung mit pefs<a class="headerlink" href="#festplattenverschlusselung-mit-pefs" title="Link zu dieser Überschrift">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd.png" src="../_images/logo-freebsd.png" />
<img alt="../_images/logo-netbsd.png" src="../_images/logo-netbsd.png" />
<img alt="../_images/logo-dragonflybsd.png" src="../_images/logo-dragonflybsd.png" />
</div>
<p><code class="docutils literal notranslate"><span class="pre">pefs</span></code> stellt eine stapelbare Dateisystemverschlüsselung zur
Verfügung. Damit ist möglich, ohne weiteres mit Hilfe eines Passworts,
eine kryptografische Transformation von Daten und Dateinamen zu
schaffen. <code class="docutils literal notranslate"><span class="pre">pefs</span></code> ist also sozusagen eine <code class="docutils literal notranslate"><span class="pre">encfs</span></code>-Alternative im
BSD-Stil (inkompatibel mit <code class="docutils literal notranslate"><span class="pre">encfs</span></code>, das von Linux her bekannt ist).</p>
<p>Ergänzt wird <code class="docutils literal notranslate"><span class="pre">pefs</span></code> durch das Modul <code class="docutils literal notranslate"><span class="pre">pam_pefs</span></code>, welches erlaubt, das
Passwort an PAM beim Login zu übergeben und so den <code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Stapel zu
initialisieren.</p>
<div class="section" id="vorteile-gegenuber-anderen-verschlusselungsmethoden">
<h2><span class="section-number">1.50.1. </span>Vorteile gegenüber anderen Verschlüsselungsmethoden<a class="headerlink" href="#vorteile-gegenuber-anderen-verschlusselungsmethoden" title="Link zu dieser Überschrift">¶</a></h2>
<ol class="arabic simple">
<li><p>Der Rechner kann bis zum Login gestartet werden und kann hiermit ohne
Hindernisse für andere Nutzer zur Verfügung stehen, die kein Passwort
für die persönlichen verschlüsselten Daten haben.</p></li>
<li><p>Man ist in der Lage eine Sicherung der verschlüsselten Daten
durchzuführen (zum Beispiel mit <code class="docutils literal notranslate"><span class="pre">dump</span></code>, ohne das Dateisystem selbst
zu entschlüsseln.</p></li>
<li><p>Wird man aufgefordert, dass Passwort für das Notebook auszugeben,
kann man seine Daten schützen, indem man einen Pseudonutzer anlegt,
den man herausgibt und nicht den echten.</p></li>
</ol>
</div>
<div class="section" id="vorgehen">
<h2><span class="section-number">1.50.2. </span>Vorgehen<a class="headerlink" href="#vorgehen" title="Link zu dieser Überschrift">¶</a></h2>
<p>Ich erkläre hier wie man es mit <code class="docutils literal notranslate"><span class="pre">pefs</span></code> und <code class="docutils literal notranslate"><span class="pre">pam_pefs</span></code> schafft, sein
<code class="docutils literal notranslate"><span class="pre">$HOME</span></code> für sich persönlich zu verschlüsseln. Man kann diese Anleitung
natürlich beliebig variieren, je nach Geschmack.</p>
<p>Diese Anleitung geht davon aus, dass Euer komplettes <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> beim
Einloggen zur Verfügung gestellt werden soll. <code class="docutils literal notranslate"><span class="pre">pam_pefs</span></code> funktioniert
auch nur in diesem Fall. Man kann nicht automatisch ein anderes
Verzeichnis als sein vordefiniertes <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> damit behandeln.</p>
<p>Man hat hier also die Möglichkeit <code class="docutils literal notranslate"><span class="pre">zwei</span> <span class="pre">Passwörter</span></code> zu definieren.
Bitte denkt daran, dass PEFS das Passwort, dass bei <code class="docutils literal notranslate"><span class="pre">addchain</span></code>
angegeben worden ist braucht, um das Dateisystem zu entschlüsseln. Euer
Login-Passwort tut das nicht. Ihr könnt Euch dennoch mit dem
Login-Passwort einloggen, aber nur dann, wenn mindestens ein Mal das
PEFS-Passwort (beim Login für PAM) eingebeben worden ist.</p>
<p>Die Schritte muss man natürlich aus Administrator durchführen.</p>
</div>
<div class="section" id="vorsichtsmasznahmen">
<h2><span class="section-number">1.50.3. </span>Vorsichtsmaßnahmen<a class="headerlink" href="#vorsichtsmasznahmen" title="Link zu dieser Überschrift">¶</a></h2>
<p>Bitte beachtet, dass es um Daten und Dateien geht. Macht unbedingt eine
Sicherung. Verlust von wichtigen Daten schmerzt immer. Ihr seid hiermit
gewarnt, dass man nicht einfach blind auf meine Anleitung verlassen
sollte und dass man leicht Fehler machen kann, die zum Datenverlust
führen können.</p>
</div>
<div class="section" id="installation">
<h2><span class="section-number">1.50.4. </span>Installation<a class="headerlink" href="#installation" title="Link zu dieser Überschrift">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pefs</span></code> installiert man mit dem Port
<a class="reference external" href="https://www.google.com/search?q=sysutils/pefs-kmod&amp;btnI=lucky">sysutils/pefs-kmod</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">portmaster</span> <span class="o">-</span><span class="n">d</span> <span class="n">sysutils</span><span class="o">/</span><span class="n">pefs</span><span class="o">-</span><span class="n">kmod</span>
</pre></div>
</div>
<p>Optional kann man AESNI beim Kernel dazuladen. Es nützt aber nur, wenn
man eine CPU hat, die AESNI unterstützt.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">/boot/loader.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aesni_load</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="home-vorbereiten">
<h2><span class="section-number">1.50.5. </span>$HOME vorbereiten<a class="headerlink" href="#home-vorbereiten" title="Link zu dieser Überschrift">¶</a></h2>
<p>Bitte hier genau aufpassen. Schaut bitte auch was tatsächlich Euer
<code class="docutils literal notranslate"><span class="pre">$HOME</span></code> ist. Bei einigen FreeBSD-Installationen ist es oft
<code class="docutils literal notranslate"><span class="pre">/usr/home/myuser</span></code>. Ich benutze hier <code class="docutils literal notranslate"><span class="pre">/home/myuser</span></code>. PEFS geht hier
ziemlich exakt vor und wird sich weigern zu funktionieren, wenn Euer
Benutzerverzeichnis <code class="docutils literal notranslate"><span class="pre">/home/myuser</span></code> ist und das mit Softlinks
realisiert wurde, sodass eigentlich Euer $HOME physikalisch auf
<code class="docutils literal notranslate"><span class="pre">/usr/home/myuser</span></code> liegt. Am Besten mit „vipw“ das $HOME auf
<code class="docutils literal notranslate"><span class="pre">/usr/home/myuser</span></code> ändern.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">.</span><span class="n">bak</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>Nun wird die verschlüsselte Schicht mit einem leeren Keychain erstellt
und ein Passwort angegeben.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pefs</span> <span class="n">addchain</span> <span class="o">-</span><span class="n">fZ</span> <span class="o">-</span><span class="n">a</span> <span class="n">aes256</span><span class="o">-</span><span class="n">xts</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
<span class="n">pefs</span> <span class="n">mount</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>(Ihr könnt natürlich einen anderen Algorithmus mit <code class="docutils literal notranslate"><span class="pre">-a</span></code> bei addchain
angeben.)</p>
<p>Jetzt testet man, ob alles korrekt funktioniert:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pefs</span> <span class="n">mount</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
<span class="n">pefs</span> <span class="n">addkey</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>Sollte alles OK sein, dann muss der Schlüssel für PAM zugreifbar gemacht
werden. Dazu setzt man nur die Permissions korrekt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chown</span> <span class="n">myuser</span><span class="p">:</span><span class="n">myuser</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/.</span><span class="n">pefs</span><span class="o">.</span><span class="n">db</span>
</pre></div>
</div>
</div>
<div class="section" id="daten-auf-das-verschlusselte-home-kopieren">
<h2><span class="section-number">1.50.6. </span>Daten auf das verschlüsselte $HOME kopieren<a class="headerlink" href="#daten-auf-das-verschlusselte-home-kopieren" title="Link zu dieser Überschrift">¶</a></h2>
<p>Bitte beachtet den letzten Slash am Quellpfad!!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">-</span><span class="n">Rp</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">.</span><span class="n">bak</span><span class="o">/</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>Das Quellverzeichnis wird hier noch nicht gelöscht. Es erspart Ärger,
wenn man es nicht jetzt schon aus der Sicherung fischen muss, falls
etwas schief gehen sollte. Denkt aber bitte daran, es zu löschen, wenn
alles glatt gegangen ist. Es sind schließlich private Daten, die
verschlüsselungswürdig sind.</p>
</div>
<div class="section" id="pam-vorbereiten">
<h2><span class="section-number">1.50.7. </span>PAM vorbereiten<a class="headerlink" href="#pam-vorbereiten" title="Link zu dieser Überschrift">¶</a></h2>
<p>PAM wird so eingestellt, dass mit dem oben angegebenen <code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Passwort
ein entschlüsselnder Mount durchgeführt wird und beim normalen
<code class="docutils literal notranslate"><span class="pre">passwd</span></code>-Passwort einfach ein Login ohne weiteres Entschlüsseln
gemacht wird.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">/etc/pam.d/system</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auth</span>            <span class="n">sufficient</span>      <span class="n">pam_opie</span><span class="o">.</span><span class="n">so</span>             <span class="n">no_warn</span> <span class="n">no_fake_prompts</span>
<span class="n">auth</span>            <span class="n">requisite</span>       <span class="n">pam_opieaccess</span><span class="o">.</span><span class="n">so</span>       <span class="n">no_warn</span> <span class="n">allow_local</span>
<span class="n">auth</span>            <span class="n">sufficient</span>      <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pam_pefs</span><span class="o">.</span><span class="n">so</span>      <span class="n">try_first_pass</span>
<span class="n">auth</span>            <span class="n">required</span>        <span class="n">pam_unix</span><span class="o">.</span><span class="n">so</span>             <span class="n">no_warn</span> <span class="n">try_first_pass</span> <span class="n">nullok</span>

<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>

<span class="n">session</span>         <span class="n">optional</span>        <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pam_pefs</span><span class="o">.</span><span class="n">so</span>
<span class="n">session</span>         <span class="n">required</span>        <span class="n">pam_lastlog</span><span class="o">.</span><span class="n">so</span>          <span class="n">no_fail</span>
</pre></div>
</div>
<p>Solltet Ihr KDM benutzen oder andere durch PAM authentifizierte Dienste,
muss man diese Zeilen auch dort einfügen.</p>
<p>Des Weiteren ist es wichtig, dass <code class="docutils literal notranslate"><span class="pre">pefs</span></code> mit einem <code class="docutils literal notranslate"><span class="pre">mount</span></code> beim
Start vorinitialisiert wird. Dieser <code class="docutils literal notranslate"><span class="pre">mount</span></code> entschlüsselt nicht,
sondern hält fest, dass das Verzeichnis ein <code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Dateisystem
darstellt.</p>
<p>Deswegen fügt man diese Zeile in die <code class="docutils literal notranslate"><span class="pre">/etc/rc.local</span></code> ein:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">pefs</span> <span class="n">mount</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
</div>
<div class="section" id="testen-des-logins">
<h2><span class="section-number">1.50.8. </span>Testen des Logins<a class="headerlink" href="#testen-des-logins" title="Link zu dieser Überschrift">¶</a></h2>
<p>Erstmal alle Schlüssel entfernen. Der <code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Mountpoint bleibt dabei
erhalten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pefs</span> <span class="n">flushkeys</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>Schaut bitte nach wie Euer <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> aussieht:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">la</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>Es sollte aus vielen seltsam aussehenden Punktdateien bestehen. Auf
einer anderen Konsole versucht nun Euren Benutzernamen einzugeben und
das Passwort, das für die Entschlüsselung angegeben wurde. Gebt nicht
Euer <code class="docutils literal notranslate"><span class="pre">passwd</span></code>-Passwort ein. Das führt nur dazu, dass Euer <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>
nicht richtig erkannt wird.</p>
<p>Schaut nach, ob die Dateien entschlüsselt sind:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">~</span>
</pre></div>
</div>
<p>Optional sollte man das auch einzeln für einen KDM-Login ausprobieren.
Natürlich muss man sich zunächst wieder ausloggen und die
<code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Schicht auch wieder mit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pefs</span> <span class="n">flushkeys</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
</pre></div>
</div>
<p>sperren bevor man es in KDM ausprobiert. KDM loggt sich bei Problemen
gar nicht ein, weil es direkt Dateien anlegen möchte, was auf einem
<code class="docutils literal notranslate"><span class="pre">pefs</span></code>-Dateisystem ohne Schlüssel wegen fehlender Schreibrechte nicht
gehen wird.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2021-05-29</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="film-dvd_erstellen.txt.html" class="btn btn-neutral float-right" title="1.51. Film-DVD erstellen" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="festplattenverschluesselung_mit_netbsd.txt.html" class="btn btn-neutral float-left" title="1.49. Festplattenverschlüsselung mit NetBSD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BSDForen.de.

    </p>
  </div>
    
    
    
    Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
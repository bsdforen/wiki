

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.136. USB Automount ohne HAL &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.137. VDSL and OpenBSD" href="vdsl_mit_openbsd.txt.html" />
    <link rel="prev" title="1.135. USB-Stick Unterstützung" href="usb-stick_unterstuetzung.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.37. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.38. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.39. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.40. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.41. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.42. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.43. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.44. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.45. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.46. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.47. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.48. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.49. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_pefs.txt.html">1.50. Festplattenverschlüsselung mit pefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.51. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.52. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.53. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.54. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.55. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.56. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.57. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.58. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.59. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="grub2-anleitung.txt.html">1.61. GRUB2-Anleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.62. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.63. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.64. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.65. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.66. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.67. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.68. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.69. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.70. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.71. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.72. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.73. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.74. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.75. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.76. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.77. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.78. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.79. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.80. Majordomo Postfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="make.conf_optimieren.txt.html">1.81. make.conf optimieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.82. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.83. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.84. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.85. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.86. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.87. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.88. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.89. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.90. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.91. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.92. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.93. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="openvpn_als_tunnel_zum_eigenen_netzwerk.txt.html">1.94. OpenVPN als Tunnel zum eigenen Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.95. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.96. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.97. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.98. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.99. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.100. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.101. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.102. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.103. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.104. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.105. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.106. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.107. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.108. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.109. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.110. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.111. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.112. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.113. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.114. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.115. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.116. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.117. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.118. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.119. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.120. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.121. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.122. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.123. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.124. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.125. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.126. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.127. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.128. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.129. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.130. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.131. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.132. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.133. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.134. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.135. USB-Stick Unterstützung</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.136. USB Automount ohne HAL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uber-automounter">1.136.1. über Automounter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vor-und-nachteile-gegenuber-hal">1.136.1.1. Vor- und Nachteile gegenüber HAL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#einrichtung">1.136.2. Einrichtung</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#grundlegende-einrichtung">1.136.2.1. grundlegende Einrichtung</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automounter-ohne-neustart-starten">1.136.2.2. Automounter ohne Neustart starten</a></li>
<li class="toctree-l4"><a class="reference internal" href="#benutzerzugriff-auf-fat-dateisysteme">1.136.2.3. Benutzerzugriff auf FAT-Dateisysteme</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mount-optionen-festlegen">1.136.2.4. Mount-Optionen festlegen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fusefs-ntfs-ntfs-3g-verwenden">1.136.2.5. Fusefs-NTFS (ntfs-3g) verwenden</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blacklisting">1.136.2.6. Blacklisting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dateisysteme-labeln">1.136.3. Dateisysteme labeln</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verschlusselung">1.136.4. Verschlüsselung</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#automounter-vorbereiten">1.136.4.1. Automounter vorbereiten</a></li>
<li class="toctree-l4"><a class="reference internal" href="#images-und-devices-einbinden">1.136.4.2. Images und Devices einbinden</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#statische-mounts">1.136.5. statische Mounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verweise">1.136.6. Verweise</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.137. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.138. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.139. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.140. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.141. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.142. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.143. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.144. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.145. Xorg Konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeit_synchronisieren_mit_ntp.txt.html">1.146. Zeit synchronisieren mit ntp</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.147. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.148. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.136. </span>USB Automount ohne HAL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/howto/usb_automount_ohne_hal.txt.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="vdsl_mit_openbsd.txt.html" class="btn btn-neutral float-right" title="1.137. VDSL and OpenBSD" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usb-stick_unterstuetzung.txt.html" class="btn btn-neutral float-left" title="1.135. USB-Stick Unterstützung" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="usb-automount-ohne-hal">
<h1><span class="section-number">1.136. </span>USB Automount ohne HAL<a class="headerlink" href="#usb-automount-ohne-hal" title="Link zu dieser Überschrift">¶</a></h1>
<aside class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd.png" src="../_images/logo-freebsd.png" />
</aside>
<p>Dieser Artikel beschreibt das Einrichten von
<a class="reference external" href="https://www.google.com/search?q=sysutils/automounter&amp;btnI=lucky">sysutils/automounter</a>,
um damit externe Datenträger automatisch zu mounten.</p>
<section id="uber-automounter">
<h2><span class="section-number">1.136.1. </span>über Automounter<a class="headerlink" href="#uber-automounter" title="Link zu dieser Überschrift">¶</a></h2>
<p>Automounter ist ein Shell-Skript, das GEOM Labels verwendet, um den
AutoMounter Daemon <strong>amd(8)</strong> dynamisch zu konfigurieren und die nötigen
Symlinks einzurichten. AMD bietet die Möglichkeit über einen Symlink
einen Mount anzustoßen, aber die Einrichtung ist recht kompliziert und
es ist notwendig, für jeden Datenträger einen recht kryptischen Eintrag
in der Datei <code class="docutils literal notranslate"><span class="pre">/etc/amd.map</span></code> zu machen und Verzeichnisse zum Mounten
und Symlinks für AMD anzulegen. Automounter erspart diese Arbeit, in dem
eine <code class="docutils literal notranslate"><span class="pre">amd.map</span></code> dynamisch erzeugt wird. Die nötigen Verzeichnisse und
Links werden auch automatisch mit angelegt. Letzteres normalerweise im
Verzeichnis <code class="docutils literal notranslate"><span class="pre">/media</span></code>, wer jedoch HAL und Automounter parallel
verwenden will, sollte dies anpassen.</p>
<section id="vor-und-nachteile-gegenuber-hal">
<h3><span class="section-number">1.136.1.1. </span>Vor- und Nachteile gegenüber HAL<a class="headerlink" href="#vor-und-nachteile-gegenuber-hal" title="Link zu dieser Überschrift">¶</a></h3>
<p>AMD und damit Automounter funktionieren unabhängig von einem Desktop
Environment, sogar komplett ohne grafische Oberfläche. Es erspart auch
das manuelle Unmounten. Es erspart jedoch nicht zu prüfen, ob ein
externer Datenträger noch gemountet ist bevor er entfernt wird. Das
Risiko eines Datenverlustes besteht weiterhin. Wer Automounter eine
Weile benutzt hat, gewöhnt sich aber recht bald daran, alle Zugriffe auf
solche Geräte bei Nicht-Bedarf sofort zu beenden. Damit fällt auch das
Risiko, ein gemountetes Laufwerk zu entfernen.</p>
<p>Der große Vorteil von Automounter ist auch der größte Nachteil. Die
fehlende Anbindung an eine grafische Oberfläche. Dadurch fehlt jegliches
visuelle Feedback, ob ein Datenträger gerade verwendet wird. Die einzige
Möglichkeit das zu überprüfen ist, mit den Kommandos
<code class="docutils literal notranslate"><span class="pre">mount</span></code>,<code class="docutils literal notranslate"><span class="pre">automounter</span> <span class="pre">list</span> <span class="pre">mounted</span></code>, <code class="docutils literal notranslate"><span class="pre">automounter</span> <span class="pre">mlist</span> <span class="pre">mounted</span></code>
oder einem Monitoring-Programm, das die eingebundenen Datenträger
anzeigt.</p>
</section>
</section>
<section id="einrichtung">
<h2><span class="section-number">1.136.2. </span>Einrichtung<a class="headerlink" href="#einrichtung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Die grundsätzliche Einrichtung ist zunächst recht einfach. Jedoch gibt
es zahlreiche Möglichkeiten Automounter an die eigenen Bedürfnisse
anzupassen.</p>
<section id="grundlegende-einrichtung">
<h3><span class="section-number">1.136.2.1. </span>grundlegende Einrichtung<a class="headerlink" href="#grundlegende-einrichtung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Nach erfolgter Installation muss erst einmal in die Datei
<code class="docutils literal notranslate"><span class="pre">/etc/rc.conf</span></code> die Zeile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">automounter_enable</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
</pre></div>
</div>
<p>eingetragen werden.</p>
<p>&lt;note&gt;Frühere Versionen dieses Artikels haben empfohlen Einträge in der
Datei <code class="docutils literal notranslate"><span class="pre">/etc/devd.conf</span></code> vorzunehmen. Das ist seit automounter-1.4.1
nicht mehr erforderlich und vorhandene Einträge sollten entfernt
werden.&lt;/note&gt;</p>
</section>
<section id="automounter-ohne-neustart-starten">
<h3><span class="section-number">1.136.2.2. </span>Automounter ohne Neustart starten<a class="headerlink" href="#automounter-ohne-neustart-starten" title="Link zu dieser Überschrift">¶</a></h3>
<p><a class="align-right reference internal" href="../_images/automounter.png"><img alt="Ausgabe von &quot;automounter list&quot;, vor und nach dem Einstecken eines USB-Stick." class="align-right" src="../_images/automounter.png" style="width: 180px;" /></a> Nachdem die grundlegende Einrichtung vorgenommen wurde, kann
Automounter mit folgendem Befehl aktiviert werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/rc.d/devd restart</span>
<span class="c1"># /usr/local/etc/rc.d/automounter start</span>
</pre></div>
</div>
</section>
<section id="benutzerzugriff-auf-fat-dateisysteme">
<h3><span class="section-number">1.136.2.3. </span>Benutzerzugriff auf FAT-Dateisysteme<a class="headerlink" href="#benutzerzugriff-auf-fat-dateisysteme" title="Link zu dieser Überschrift">¶</a></h3>
<p>Da FAT-Dateisysteme (msdosfs) keine Benutzerverwaltung unterstützen,
übernehmen sie die Zugriffsrechte des Mountpunkt. Automounter wiederum
erzeugt den Mountpunkt mit den Rechten des Devices welches gemountet
wird. Um also Zuriffsrechte zu gewähren müssen die Zugriffsrechte auf
das entsprechende Device geändert werden. Wie Zugriffsrechte für Devices
gesetzt werden ist im Artikel <a class="reference external" href="mounten_als_benutzer#zugriffsrechte_setzen">Mounten als
Benutzer</a> beschrieben.</p>
<p>Mit folgendem Eintrag in der Datei <code class="docutils literal notranslate"><span class="pre">/etc/devfs.rules</span></code> erlangen alle
Benutzer, die Mitglieder der Gruppe <strong>operator</strong> sind, die vollen
Zugriffsrechte auf FAT-Dateisysteme.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span> <span class="n">path</span> <span class="s1">&#39;msdosfs/*&#39;</span>  <span class="n">mode</span> <span class="mi">0660</span> <span class="n">group</span> <span class="n">operator</span>
</pre></div>
</div>
<p>Nicht vergessen nach der Änderung den Befehl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/rc.d/devfs restart</span>
</pre></div>
</div>
<p>auszuführen.</p>
</section>
<section id="mount-optionen-festlegen">
<h3><span class="section-number">1.136.2.4. </span>Mount-Optionen festlegen<a class="headerlink" href="#mount-optionen-festlegen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Standard-Mount-Optionen sind <code class="docutils literal notranslate"><span class="pre">rw,noatime,noexec</span></code>. Mit
<code class="docutils literal notranslate"><span class="pre">mount_options</span></code> können diese in der Konfigurationsdatei verändert
werden. Es können aber auch Optionen spezifisch für bestimmte
Dateisystemtypen angegeben werden. Um Beispielsweise FAT-Partitionen als
UTF-8 codiert zu behandeln genügt folgende Zeile in der
<code class="docutils literal notranslate"><span class="pre">automounter.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>msdosfs_options=$mount_options,-L=en_GB.UTF-8
</pre></div>
</div>
<p>Ist die Datei noch nicht vorhanden, sollte sie unter <code class="docutils literal notranslate"><span class="pre">/usr/local/etc</span></code>
angelegt werden. Dort findet sich auch eine <code class="docutils literal notranslate"><span class="pre">automounter.conf.sample</span></code>
mit Beispielen.</p>
<p>Die NTFS-Unterstützung von FreeBSD sollte besser nur lesend verwendet
werden. Der Schreibzugriff funktioniert nur extrem eingeschränkt und ist
nicht besonders vertrauenswürdig. Deshalb empfiehlt es sich
NTFS-Laufwerke nur lesend zu verwenden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ntfs_options</span><span class="o">=</span><span class="n">ro</span>
</pre></div>
</div>
</section>
<section id="fusefs-ntfs-ntfs-3g-verwenden">
<h3><span class="section-number">1.136.2.5. </span>Fusefs-NTFS (ntfs-3g) verwenden<a class="headerlink" href="#fusefs-ntfs-ntfs-3g-verwenden" title="Link zu dieser Überschrift">¶</a></h3>
<p>Wer auch schreibend auf NTFS-Dateisysteme zugreifen will ist auf die
User-Mode Implementierung
<a class="reference external" href="https://www.google.com/search?q=sysutils/fusefs-ntfs&amp;btnI=lucky">sysutils/fusefs-ntfs</a>
angewiesen. User-Mode Dateisysteme haben signifikante Nachteile. Da es
jedoch keine Alternative gibt bietet Automounter einen Hack mit dem
diese <em>ein wenig</em> umschifft werden können.</p>
<p>Dieser Hack wird mit folgendem Eintrag in der <code class="docutils literal notranslate"><span class="pre">automounter.conf</span></code>
aktiviert:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">evil_fuse</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Ohne diesen Hack würden alle paar Sekunden auf Fuse-basierten Mounts
alle geöffneten Dateien geschlossen werden. Damit geht auch ein <code class="docutils literal notranslate"><span class="pre">cd</span></code>
in ein Verzeichnis verloren. Der Hack hat allerdings auch den Nachteil,
dass Fuse-basierte Mounts <em>alle</em> gemountet bleiben, bis keiner mehr
verwendet wird. Erst dann kommt es zum Unmount. Ohne ist Fusefs in
Verbindung mit amd und damit Automounter jedoch einfach nicht sinnvoll
verwendbar.</p>
<p>Je nach FreeBSD-Version unterscheidet sich die Einbindung von <code class="docutils literal notranslate"><span class="pre">fusefs</span></code>
in <code class="docutils literal notranslate"><span class="pre">automounter</span></code>.</p>
<section id="bis-7-1-release-releng-7-vor-dem-24-03-2009-und-releng-8-vor-dem-05-03-2009">
<h4><span class="section-number">1.136.2.5.1. </span>Bis 7.1-Release, RELENG_7 vor dem 24.03.2009 und RELENG_8 vor dem 05.03.2009<a class="headerlink" href="#bis-7-1-release-releng-7-vor-dem-24-03-2009-und-releng-8-vor-dem-05-03-2009" title="Link zu dieser Überschrift">¶</a></h4>
<p>Um Fusefs einzusetzen genügt in der <code class="docutils literal notranslate"><span class="pre">automounter.conf</span></code> die folgende
Zeile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ntfs</span><span class="o">=</span><span class="n">ntfs</span><span class="o">-</span><span class="mi">3</span><span class="n">g</span>
</pre></div>
</div>
<p>Es empfehlen sich auch etwas andere Optionen beim Mounten:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ntfs_options</span><span class="o">=</span><span class="n">rw</span><span class="p">,</span><span class="n">noatime</span><span class="p">,</span><span class="n">sync_unmount</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">umask</span><span class="o">=</span><span class="mi">113</span><span class="p">,</span><span class="n">dmask</span><span class="o">=</span><span class="mi">002</span><span class="p">,</span><span class="n">locale</span><span class="o">=</span><span class="n">en_GB</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>Die Optionen <code class="docutils literal notranslate"><span class="pre">gid=5</span></code>, <code class="docutils literal notranslate"><span class="pre">umask=113</span></code> und <code class="docutils literal notranslate"><span class="pre">dmask=002</span></code> sorgen dafür,
dass nur Mitglieder der Gruppe Operator Schreibzugriff erhalten. Wenn
das nicht erwünscht ist können die Optionen weggelassen werden.</p>
<p>Mit <code class="docutils literal notranslate"><span class="pre">noatime</span></code> werden unnötige Schreibzugriffe verhindert und mit
<code class="docutils literal notranslate"><span class="pre">locale</span></code> wird die Kodierung von Dateinamen festgelegt. Da sollte
natürlich die Kodierung der Wahl angegeben werden. Eigentlich verwendet
NTFS-3g die Locale des Environments, aber beim Booten steht diese immer
auf C, deshalb sollte die gewünschte Locale fest eingetragen werden. Die
<code class="docutils literal notranslate"><span class="pre">sync_unmount</span></code> Option stellt sicher, dass ein unmount erst dann
terminiert, wenn alle Daten auf den Datenträger zurückgeschrieben sind.</p>
</section>
<section id="neure-systeme">
<h4><span class="section-number">1.136.2.5.2. </span>Neure Systeme<a class="headerlink" href="#neure-systeme" title="Link zu dieser Überschrift">¶</a></h4>
<p>Um Fusefs einzusetzen müssen in der <code class="docutils literal notranslate"><span class="pre">automounter.conf</span></code> die
Standardoptionen für <code class="docutils literal notranslate"><span class="pre">ntfs</span></code> überschrieben werden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ntfs_options</span><span class="o">=</span><span class="n">rw</span><span class="p">,</span><span class="n">noatime</span><span class="p">,</span><span class="n">mountprog</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">ntfs</span><span class="o">-</span><span class="mi">3</span><span class="n">g</span><span class="p">,</span><span class="n">sync_unmount</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">umask</span><span class="o">=</span><span class="mi">113</span><span class="p">,</span><span class="n">dmask</span><span class="o">=</span><span class="mi">002</span><span class="p">,</span><span class="n">locale</span><span class="o">=</span><span class="n">en_GB</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>Die Optionen <code class="docutils literal notranslate"><span class="pre">gid=5</span></code>, <code class="docutils literal notranslate"><span class="pre">umask=113</span></code> und <code class="docutils literal notranslate"><span class="pre">dmask=002</span></code> sorgen dafür,
dass nur Mitglieder der Gruppe Operator Schreibzugriff erhalten. Wenn
das nicht erwünscht ist können die Optionen weggelassen werden.</p>
<p>Mit <code class="docutils literal notranslate"><span class="pre">noatime</span></code> werden unnötige Schreibzugriffe verhindert und mit
<code class="docutils literal notranslate"><span class="pre">locale</span></code> wird die Kodierung von Dateinamen festgelegt. Da sollte
natürlich die Kodierung der Wahl angegeben werden. Eigentlich verwendet
NTFS-3g die Locale des Environments, aber beim Booten steht diese immer
auf C, deshalb sollte die gewünschte Locale fest eingetragen werden. Die
<code class="docutils literal notranslate"><span class="pre">sync_unmount</span></code> Option stellt sicher, dass ein Unmount erst dann
terminiert, wenn alle Daten auf den Datenträger zurückgeschrieben sind.</p>
</section>
</section>
<section id="blacklisting">
<h3><span class="section-number">1.136.2.6. </span>Blacklisting<a class="headerlink" href="#blacklisting" title="Link zu dieser Überschrift">¶</a></h3>
<p>Blacklisting bedeutet eine Liste von Dingen zu führen, die
ausgeschlossen werden. Im Falle von Automounter können Shell-Patterns
verwendet werden um bestimmte Devices oder Labels auszuschließen. Wer
seine Systempartition zum Beispiel mit einer eindeutigen Zahl
kennzeichnet, kann sie recht einfach von der Behandlung durch
Automounter ausschließen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blacklist_nodes</span><span class="o">=</span><span class="s2">&quot;ufs/2*&quot;</span>
</pre></div>
</div>
<p>Wer noch ein parallel installiertes Windows hat und das gleiche mit den
dortigen Partitionen getan hat, kann diese auch noch gleich
ausschließen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blacklist_nodes</span><span class="o">=</span><span class="s2">&quot;ufs/2*,ntfs/2*&quot;</span>
</pre></div>
</div>
<p>Natürlich kann gleich <code class="docutils literal notranslate"><span class="pre">ntfs/*</span></code> ausgeschlossen werden, wenn die Risiken
im Umgang mit NTFS als zu hoch erscheinen.</p>
<p>Es kann aber auch direkt an den Devices Blacklisting vorgenommen werden.
Das ist vor allem deshalb nützlich, weil beim Booten zwar Labels von
optischen Datenträgern erzeugt werden, diese aber keinerlei
Aktualisierung erfahren, wenn der Datenträger später entfernt oder
ausgetauscht wird.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blacklist_devs</span><span class="o">=</span><span class="s2">&quot;acd*&quot;</span>
</pre></div>
</div>
<p>Schließt optische Laufwerke kategorisch aus.</p>
</section>
</section>
<section id="dateisysteme-labeln">
<h2><span class="section-number">1.136.3. </span>Dateisysteme labeln<a class="headerlink" href="#dateisysteme-labeln" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der Umgang mit Datenträgern wird deutlich angenehmer, wenn die darauf
befindlichen Dateisystem gelabelt sind. Für UFS kann beim Anlegen mit
<code class="docutils literal notranslate"><span class="pre">newfs</span></code> der Parameter <code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">&lt;label&gt;</span></code> verwendet werden. Um nachträglich
ein Label zu erzeugen wird das Kommando <code class="docutils literal notranslate"><span class="pre">tunefs</span></code> ebenfalls mit dem
Parameter <code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">&lt;label&gt;</span></code> verwendet. Auch <code class="docutils literal notranslate"><span class="pre">newfs_msdos</span></code> unterstützt den
Parameter. Wer Labels jedoch nachträglich anlegen will ist auf
zusätzliche Programme aus den Ports oder eine Windows-Installation
angewiesen. Gleiches gilt für NTFS.</p>
<p>USB-Sticks kommen üblicherweise mitsamt einem Label vorformatiert. Sie
sind also quasi sofort einsatzbereit.</p>
</section>
<section id="verschlusselung">
<h2><span class="section-number">1.136.4. </span>Verschlüsselung<a class="headerlink" href="#verschlusselung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Automounter kann sowohl verschlüsselte Partitionen als auch Images
einbinden, deren Schlüssel auf einem externen Datenträger wie einem
USB-Stick oder einer Karte steckt. Verschlüsselung bedeutet hier immer
<strong>geli(8)</strong>. Die verschlüsselten Images, Datenträger und Partitionen
dürfen jedoch kein Passwort erfordern. Zum entschlüsseln muss ein
Schlüssel reichen.</p>
<p>Als Schlüssel wird gewöhnlich eine Datei mit Daten aus <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code>
erzeugt. Der folgende Befehl legt eine Datei, die 256 Bytes an
Zufallswerten enthält, an:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">random</span> <span class="n">of</span><span class="o">=</span><span class="n">keyfile</span> <span class="n">bs</span><span class="o">=</span><span class="mi">256</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Diese Datei ist als Schlüssel gut geeignet.</p>
<p>Da beim Anlegen einer verschlüsselten Partition oder eines
verschlüsselten Image viele Möglichkeiten gibt, wird das hier nicht
weiter Erklärt. Nur der Parameter <code class="docutils literal notranslate"><span class="pre">-P</span></code> (keine Passphrase) für das
Kommando <code class="docutils literal notranslate"><span class="pre">geli</span> <span class="pre">init</span></code> sei hier als unabdingbar für die Verwendung mit
Automounter genannt. Alles weitere ist in der Manual Page <strong>geli(8)</strong>
nachzulesen.</p>
<section id="automounter-vorbereiten">
<h3><span class="section-number">1.136.4.1. </span>Automounter vorbereiten<a class="headerlink" href="#automounter-vorbereiten" title="Link zu dieser Überschrift">¶</a></h3>
<p>Um die geli-gestützten Funktionen von Automounter zu aktivieren muss in
die Datei <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/automounter.conf</span></code> folgendes eingetragen
werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geli</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Außerdem muss das Verzeichnis <code class="docutils literal notranslate"><span class="pre">/var/geli/images/</span></code> angelegt werden.
Alternativ kann in der Konfigurationsdatei ein alternativer Pfad
angegeben werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geli_images</span><span class="o">=</span><span class="s2">&quot;/usr/images&quot;</span>
</pre></div>
</div>
<p>Dort können dann verschlüsselte Images abgelegt oder verlinkt werden.
Auch wenn keine Images sondern Devices verschlüsselt werden sollen wird
das Verzeichnis noch benötigt.</p>
<p>Die Schlüssel zu den Images werden auf den eingebundenen Laufwerken im
Verzeichnis <code class="docutils literal notranslate"><span class="pre">.geli/keys/</span></code> gesucht. Auch das kann in der
Konfigurationsdatei geändert werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geli_keys</span><span class="o">=</span><span class="s2">&quot;.keys&quot;</span>
</pre></div>
</div>
</section>
<section id="images-und-devices-einbinden">
<h3><span class="section-number">1.136.4.2. </span>Images und Devices einbinden<a class="headerlink" href="#images-und-devices-einbinden" title="Link zu dieser Überschrift">¶</a></h3>
<p>Images können einfach im Image Verzeichnis abgelegt oder von dort mit
<code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span></code> als symbolische Links angelegt werden.</p>
<p>Der Name der Datei oder des Links ist ausschlaggebend für das Finden des
Schlüssels. Die Namen müssen mit dem auf dem externen Datenträger
vorhandenen Schlüssel exakt identisch sein. Bei einem Link ist der Name
des Ziels unerheblich, es zählt nur der Name des Links.</p>
<p>Links werden auch verwendet um Devices einzubinden. Die Links müssen
jedoch mit etwas Bedacht angelegt werden. Automounter legt für Images
mit <code class="docutils literal notranslate"><span class="pre">mdconfig</span> <span class="pre">-f</span></code> eine File-Backed Memory Disk an. Das bedeutet das
Image wird unter <code class="docutils literal notranslate"><span class="pre">/dev</span></code> als Device angeboten. Das funktioniert jedoch
nur, wenn es sich tatsächlich um Dateien handelt, deswegen kann nicht
einfach mit einem Verweis auf <code class="docutils literal notranslate"><span class="pre">/dev/ada0s4</span></code> (4. Slice der 1.
ATA-Platte) auf ein Device verwiesen werden.</p>
<p>Der Automounter erkennt Devices daran, dass er dem Symlink nicht folgen
kann. Wenn das der Fall ist geht Automounter davon aus, dass der Link
relativ zu <code class="docutils literal notranslate"><span class="pre">/dev</span></code> angelegt wurde.</p>
<p>Ein Link auf <code class="docutils literal notranslate"><span class="pre">/dev/ada0s4</span></code> kann also folgendermaßen angelegt werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /var/geli/images</span>
<span class="c1"># ln -s ada0s4 test</span>
</pre></div>
</div>
<p>Automounter kann die momentan erkannten Images ausgeben:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># automounter list encrypted</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">porsche</span><span class="o">&gt;</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">ada0s4</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Oder gleich eine ausführlichere Übersicht:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># automounter list</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ntfs</span><span class="o">/</span><span class="mi">2</span><span class="n">vault</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">ada0s3</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ntfs</span><span class="o">/</span><span class="mi">2</span><span class="n">system</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">ada0s1</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">acd0</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">acd0</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">cd0</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">cd0</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">cd1</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">cd1</span><span class="o">&gt;</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">porsche</span><span class="o">&gt;</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">ada0s4</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Nach einführen eines USB-Stick mit Schlüssel für das Image <code class="docutils literal notranslate"><span class="pre">porsche</span></code>
sieht die Ausgabe folgendermaßen aus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># automounter list</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">msdosfs</span><span class="o">/</span><span class="n">APRIL</span> <span class="n">RYAN</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">da1</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ufs</span><span class="o">/</span><span class="n">porsche</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">md0</span><span class="o">.</span><span class="n">eli</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ntfs</span><span class="o">/</span><span class="mi">2</span><span class="n">system</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">ada0s1</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ntfs</span><span class="o">/</span><span class="mi">2</span><span class="n">vault</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">ada0s3</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">acd0</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">acd0</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">cd0</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">cd0</span><span class="o">&gt;</span>
<span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">iso9660</span><span class="o">/</span><span class="n">cd1</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">cd1</span><span class="o">&gt;</span>
<span class="n">key</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">porsche</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">msdosfs</span><span class="o">/</span><span class="n">APRIL</span> <span class="n">RYAN</span><span class="o">&gt;</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">porsche</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">md0</span><span class="o">&gt;</span> <span class="k">with</span> <span class="n">key</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">msdosfs</span><span class="o">/</span><span class="n">APRIL</span> <span class="n">RYAN</span><span class="o">&gt;</span>
<span class="n">encrypted</span> <span class="n">provider</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">ada0s4</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Wenn der Stick mit dem Schlüssel abgezogen wird, wird <code class="docutils literal notranslate"><span class="pre">md0</span></code> sobald
möglich zerstört. Sobald wie möglich heißt sobald <code class="docutils literal notranslate"><span class="pre">md0</span></code> nicht mehr
verwendet wird. In diesem konkreten Fall ist auf der ersten Konsole zu
Erfahren:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span> <span class="n">label</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ufs</span><span class="o">/</span><span class="n">porsche</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">md0</span><span class="o">.</span><span class="n">eli</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Das Device kann also erst zerstört werden, wenn <code class="docutils literal notranslate"><span class="pre">ufs/porsche</span></code> nicht
mehr gemountet ist.</p>
</section>
</section>
<section id="statische-mounts">
<h2><span class="section-number">1.136.5. </span>statische Mounts<a class="headerlink" href="#statische-mounts" title="Link zu dieser Überschrift">¶</a></h2>
<p>Obwohl Automounter viele Anwendungsfälle abdeckt, kann der ein- oder
andere statische Mount doch nützlich sein. Zum Beispiel für Samba- oder
NFS-Mounts. Dieses Beispiel zeigt wie ein Samba-Ordner names <strong>share</strong>
von einem Rechner mit dem Hostnamen <strong>mediacentre</strong> eingebunden wird.</p>
<p>Statischen Mounts können recht transparent in die von Automounter
verwendeten Strukturen mit eingebettet werden. Um den Samba-Share über
<code class="docutils literal notranslate"><span class="pre">/media</span></code> zu erreichen müssen zuerst folgende Zeilen in die Datei
<code class="docutils literal notranslate"><span class="pre">/etc/amd.map</span></code> eingefügt werden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>smbfs type:=auto;fs:=${map};pref:=${key}/

smbfs/mediacentre.share type:=program;fs:=/mnt/amd/smbfs/mediacentre.share;\
mount:=&quot;/sbin/mount mount /mnt/amd/smbfs/mediacentre.share&quot;;\
unmount:=&quot;/sbin/umount umount /mnt/amd/smbfs/mediacentre.share&quot;
</pre></div>
</div>
<p>Außerdem muss in die Datei <code class="docutils literal notranslate"><span class="pre">/etc/fstab</span></code> folgende Zeile eingefügt
werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">guest</span><span class="nd">@mediacentre</span><span class="o">/</span><span class="n">share</span><span class="o">/</span>    <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">amd</span><span class="o">/</span><span class="n">smbfs</span><span class="o">/</span><span class="n">mediacentre</span><span class="o">.</span><span class="n">share</span>    <span class="n">smbfs</span>   <span class="n">noauto</span><span class="p">,</span><span class="n">rw</span><span class="p">,</span><span class="n">noatime</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="o">-</span><span class="n">L</span><span class="o">=</span><span class="n">en_GB</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="o">-</span><span class="n">N</span>  <span class="mi">0</span>   <span class="mi">0</span>
</pre></div>
</div>
<p>Nun müssen noch einige Verzeichnisse und ein Link angelegt werden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mkdir -p /mnt/amd/smbfs/mediacentre.share /media/smbfs</span>
<span class="c1"># ln -s /var/run/automounter.amd.mnt/smbfs/mediacentre.share /media/smbfs/mediacentre.share</span>
</pre></div>
</div>
<p>Nun muss nur noch Automounter die Änderung der Datei <code class="docutils literal notranslate"><span class="pre">/etc/amd.map</span></code>
bekannt gemacht werden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># automounter update</span>
</pre></div>
</div>
<p>Ab diesem Zeitpunkt kann unter <code class="docutils literal notranslate"><span class="pre">/media/smbfs/mediacentre.share</span></code> auf
den Samba-Share zugegriffen werden.</p>
</section>
<section id="verweise">
<h2><span class="section-number">1.136.6. </span>Verweise<a class="headerlink" href="#verweise" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li><p>Die Projekthomepage <a class="reference external" href="http://sourceforge.net/projects/bsdadminscripts">http://sourceforge.net/projects/bsdadminscripts</a></p></li>
<li><p>Die Manual Page <strong>automounter(8)</strong></p></li>
<li><p>Die Manual Page <strong>automounter.conf(5)</strong></p></li>
<li><p>Die Manual Page <strong>geli(8)</strong></p></li>
<li><p>Die Manual Page <strong>ntfs-3g(8)</strong></p></li>
</ul>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2021-05-24</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vdsl_mit_openbsd.txt.html" class="btn btn-neutral float-right" title="1.137. VDSL and OpenBSD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usb-stick_unterstuetzung.txt.html" class="btn btn-neutral float-left" title="1.135. USB-Stick Unterstützung" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, BSDForen.de

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>


<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1.94. OpenVPN als Tunnel zum eigenen Netzwerk &mdash; BSDForen.de 1.0 Dokumentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="1.95. Pakete deinstallieren" href="pakete_deinstallieren.txt.html" />
    <link rel="prev" title="1.93. OpenOffice unter FreeBSD" href="openoffice_unter_freebsd.txt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BSDForen.de
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="howto_index.html">1. Howto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3d-grafik-beschleunigung.txt.html">1.1. 3D-Grafik-Beschleunigung</a></li>
<li class="toctree-l2"><a class="reference internal" href="anschluss_an_das_internet_mit_pppoe_mpd_und_firewall_pf.txt.html">1.2. Anschluss an das Internet mit PPPoe (mpd) und Firewall (pf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="apache_mit_php5_installieren.txt.html">1.3. Apache mit php5 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="asterisk_voip_telefonanalge.txt.html">1.4. Asterisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio-cd_rippen.txt.html">1.5. Audio-CD rippen</a></li>
<li class="toctree-l2"><a class="reference internal" href="aufloesung_der_konsole_aendern.txt.html">1.6. Auflösung der Konsole ändern</a></li>
<li class="toctree-l2"><a class="reference internal" href="authpf.txt.html">1.7. authpf</a></li>
<li class="toctree-l2"><a class="reference internal" href="autologin_auf_der_konsole.txt.html">1.8. Autologin auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatische_proxy-konfiguration.txt.html">1.9. Automatische Proxy-Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatisches_beenden_von_diensten.txt.html">1.10. Automatisches Beenden von Diensten</a></li>
<li class="toctree-l2"><a class="reference internal" href="automount.txt.html">1.11. Automount</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk.txt.html">1.12. AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_auf_cd-r.txt.html">1.13. Backup auf CD-R</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_mit_hammer.txt.html">1.14. Backup mit HAMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup_ueber_das_netzwerk.txt.html">1.15. Backup über das Netzwerk</a></li>
<li class="toctree-l2"><a class="reference internal" href="batterieueberwachung.txt.html">1.16. Batterieüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="beseitigen_von_problemen_und_fehlern.txt.html">1.17. Beseitigen von Problemen und Fehlern</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.txt.html">1.18. Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootvorgang_verschoenern.txt.html">1.19. Bootvorgang verschönern/verkürzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="canon_eos_1100d_mit_gphoto_und_gimp_betreiben.txt.html">1.20. Verwendung einer Canon EOS 1100D mit Gimp im Tethering Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="cd_iso_to_usb.txt.html">1.21. FreeBSD CD-ISO in USB Stick Image umwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="chinesisch_schreiben.txt.html">1.22. Chinesisch schreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_stepping.txt.html">1.23. CPU Stepping (cpufreq, powerd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossbuilding_freebsd.txt.html">1.24. Crossbuilding FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="crunchbsd.txt.html">1.25. CrunchBang Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_drucken_in_heterogener_umgebung.txt.html">1.26. CUPS - Drucken in heterogener Umgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html">1.27. CUPS - Installation und Konfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cups_-_installation_und_konfiguration.txt.html#drucker-einrichten-unter-cups">1.28. Drucker einrichten unter CUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="datenrettung.txt.html">1.29. Datenrettung</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html">1.30. Deutsche Sprachausgabe mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="deutsche_sprachausgabe_mit_festival.txt.html#kmouth-mit-festival">1.31. KMouth mit Festival</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfs.txt.html">1.32. devfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dhcp-server_einrichten.txt.html">1.33. DHCP-Server einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns-cache.txt.html">1.34. DNS-Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_apsfilter.txt.html">1.35. Drucken mit Apsfilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="drucken_mit_windows.txt.html">1.36. Drucken mit Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsl_konfigurieren_netbsd.txt.html">1.37. DSL konfigurieren (NetBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb-t_karte_hauppauge_wintv-hvr_1300.txt.html">1.38. DVB-T Karte Hauppauge WinTV-HVR 1300</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvb_unter_freebsd.txt.html">1.39. DVB unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvd-rip_mit_mencoder.txt.html">1.40. DVD-Rip mit mencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="dvds_brennen.txt.html">1.41. DVDs brennen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ed2k-protokoll.txt.html">1.42. ed2k-Protokoll beim Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="eigenes_live-system_auf_usb-stick_installieren.txt.html">1.43. Eigenes Live-System auf USB-Stick installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="externe_projekte.txt.html">1.44. Mail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ezjail.txt.html">1.45. Ezjail</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten.txt.html">1.46. Festplatte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplatte_einrichten_gpt.txt.html">1.47. Manuelle Verwaltung von Festplatten nach neuem GUID Partition Table (GPT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_geli_und_usb_boot.txt.html">1.48. Festplattenverschlüsselung mit Geli und USB Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_netbsd.txt.html">1.49. Festplattenverschlüsselung mit NetBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="festplattenverschluesselung_mit_pefs.txt.html">1.50. Festplattenverschlüsselung mit pefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="film-dvd_erstellen.txt.html">1.51. Film-DVD erstellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall-regeln.txt.html">1.52. Firewall-Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="floppy.txt.html">1.53. Floppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluxbox_mit_gdm.txt.html">1.54. Fluxbox mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_als_gast_unter_vmware.txt.html">1.55. FreeBSD als Gast unter VMware</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd_boot_manager_und_vista.txt.html">1.56. FreeBSD Boot Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp-server_mit_pureftpd.txt.html">1.57. FTP-Server mit PureFTPd</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnupg.txt.html">1.58. GnuPG</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsdrive.txt.html">1.59. GPSDrive</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafikausgabe_im_netzwerk.txt.html">1.60. Grafikausgabe im Netzwerk: X11, XDM und XDMCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="grub2-anleitung.txt.html">1.61. GRUB2-Anleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm_thinkpad_bios-update.txt.html">1.62. IBM Thinkpad BIOS-Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel2200bg.txt.html">1.63. Intel 2200BG</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipsec-vpn.txt.html">1.64. IPSEC-VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6_netzwerke.txt.html">1.65. IPv6-Netzwerke mit FreeBSD als Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="irc-protokoll.txt.html">1.66. irc-Protokoll im Mozilla, Seamonkey und Firefox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_mounten.txt.html">1.67. ISO-Images mounten</a></li>
<li class="toctree-l2"><a class="reference internal" href="iso-images_von_optischen_medien_erzeugen.txt.html">1.68. ISO-Images von optischen Medien erzeugen</a></li>
<li class="toctree-l2"><a class="reference internal" href="jails.txt.html">1.69. Jails</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_installation.txt.html">1.70. Java Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="k3b_einrichten.txt.html">1.71. K3B einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="kde4-tipps.txt.html">1.72. KDE4 Tipps</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdm.txt.html">1.73. KDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerio_mailserver.txt.html">1.74. Kerio Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="konsole_nach_systemstart_und_logout_loeschen.txt.html">1.75. Konsole nach Systemstart und Logout löschen</a></li>
<li class="toctree-l2"><a class="reference internal" href="kopplung_zweier_stationen_mittels_rfc3378_via_wlan_freebsd.txt.html">1.76. Kopplung zweier Stationen mittels RFC3378 via WLAN (FreeBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="m0n0wall_sip.txt.html">1.77. M0n0wall &amp; SIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailhamster.txt.html">1.78. Mailhamster (Mailsammler)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailsystem.txt.html">1.79. Das eigene Mailsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="majordomo_postfix.txt.html">1.80. Majordomo Postfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="make.conf_optimieren.txt.html">1.81. make.conf optimieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_world.txt.html">1.82. make world</a></li>
<li class="toctree-l2"><a class="reference internal" href="mehrmonitor-betrieb.txt.html">1.83. Mehrmonitor-Betrieb</a></li>
<li class="toctree-l2"><a class="reference internal" href="mkisofs_und_cdrecord.txt.html">1.84. mkisofs und cdrecord</a></li>
<li class="toctree-l2"><a class="reference internal" href="mounten_als_benutzer.txt.html">1.85. Mounten als Benutzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="moused_einrichten.txt.html">1.86. moused einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozilla_mit_java-_und_flashsupport.txt.html">1.87. Mozilla mit Java- und Flashsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpd_einrichten.txt.html">1.88. MPD einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi.txt.html">1.89. MPI auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="multihead_mit_nv.txt.html">1.90. Multihead mit nv</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvidia_twinview.txt.html">1.91. nVidia Twinview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openbsd_raspberry4_installieren.txt.html">1.92. OpenBSD 6.7 auf dem RaspberryPI 4 installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="openoffice_unter_freebsd.txt.html">1.93. OpenOffice unter FreeBSD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.94. OpenVPN als Tunnel zum eigenen Netzwerk</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">1.94.1. Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#erstellen-der-zertifikate">1.94.1.1. Erstellen der Zertifikate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#erstellen-einer-eigenen-ca">1.94.1.2. Erstellen einer eigenen CA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#server-zertifikat">1.94.1.3. Server Zertifikat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-zertifikat-erstellen">1.94.1.4. Client Zertifikat erstellen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-zertifikat-sperren">1.94.1.5. Client Zertifikat sperren</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#konfiguration-von-openvpn">1.94.2. Konfiguration von OpenVPN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#server-konfiguration">1.94.2.1. Server Konfiguration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-konfiguration">1.94.2.2. Client Konfiguration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#test">1.94.3. Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pakete_deinstallieren.txt.html">1.95. Pakete deinstallieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="paketsysteme.txt.html">1.96. Paketsysteme</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitionierung.txt.html">1.97. Festplattenpartitionierung unter FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pkg.txt.html">1.98. pkg</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_antivirus.txt.html">1.99. Postfix Antivirus</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_courier_openldap.txt.html">1.100. Postfix Courier OpenLDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfix_dspam.txt.html">1.101. Postfix DSPAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql_update.txt.html">1.102. PostgreSQL Update auf einen neueren Zweig</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere.txt.html">1.103. Poudriere</a></li>
<li class="toctree-l2"><a class="reference internal" href="poudriere_guide.txt.html">1.104. Poudriere Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="putty.txt.html">1.105. PuTTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="remount_rw.txt.html">1.106. Remount RW Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_control_system.txt.html">1.107. Revision Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="runit.txt.html">1.108. runit auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="samsung_smt_7020s.txt.html">1.109. Samsung SMT-7020S</a></li>
<li class="toctree-l2"><a class="reference internal" href="scharfe_windows_schriften.txt.html">1.110. scharfe Windows Schriften</a></li>
<li class="toctree-l2"><a class="reference internal" href="schoene_schriften_in_xorg.txt.html">1.111. Schöne Schriften in Xorg</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell-scripting.txt.html">1.112. Shell-Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundkarte_einrichten.txt.html">1.113. Soundkarte einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="speaker_deaktivieren.txt.html">1.114. PC-Speaker deaktivieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.txt.html">1.115. ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="suspend_resume_thinkpad.txt.html">1.116. Suspend und Resume bei Thinkpads</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_in_raid1_verwandeln.txt.html">1.117. System in RAID1 verwandeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemueberwachung.txt.html">1.118. Systemüberwachung</a></li>
<li class="toctree-l2"><a class="reference internal" href="texlive_aus_den_quellen.txt.html">1.119. TeXlive aus dem Quellcode installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomcat_6_installation_und_stolpersteine.txt.html">1.120. Tomcat 6 Installation und Stolpersteine</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor.txt.html">1.121. Tor (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tor_und_privoxy.txt.html">1.122. Tor und Privoxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tortoise-like_svn_menu_in_nautilus_mit_rabbitcvs.txt.html">1.123. Tortoise like SVN Menu in Nautilus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tv-karte_benutzen.txt.html">1.124. TV-Karte benutzen</a></li>
<li class="toctree-l2"><a class="reference internal" href="twinview_mit_nvidia.txt.html">1.125. TwinView mit dem nVidia-Treiber für FreeBSD, Linux und Solaris</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts.txt.html">1.126. UMTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_huawei.txt.html">1.127. UMTS mit HUAWEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="umts_mit_sunrise_und_swisscom.txt.html">1.128. UMTS mit Sunrise und Swisscom</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.txt.html">1.129. UNICODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode_auf_der_konsole.txt.html">1.130. Unicode auf der Konsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix-freigabe.txt.html">1.131. Unix-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="updaten_von_openbsd.txt.html">1.132. Updaten von OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_als_system-laufwerk_nutzen_mit_netbsd_livekey.txt.html">1.133. USB-Stick als System-Laufwerk nutzen mit „NetBSD LiveKey“</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_installation.txt.html">1.134. USB-Stick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-stick_unterstuetzung.txt.html">1.135. USB-Stick Unterstützung</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_automount_ohne_hal.txt.html">1.136. USB Automount ohne HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdsl_mit_openbsd.txt.html">1.137. VDSL and OpenBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vlans_mit_freebsd.txt.html">1.138. VLAN-Konfiguration mit FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="vpn_openbsd.txt.html">1.139. VPN (OpenBSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowmanager.txt.html">1.140. Windowmanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows-freigabe.txt.html">1.141. Windows-Freigabe</a></li>
<li class="toctree-l2"><a class="reference internal" href="wine.txt.html">1.142. Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfce4_mit_gdm.txt.html">1.143. Xfce4 mit gdm</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmodmap.txt.html">1.144. Xmodmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xorg_config.txt.html">1.145. Xorg Konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeit_synchronisieren_mit_ntp.txt.html">1.146. Zeit synchronisieren mit ntp</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs.txt.html">1.147. ZFS auf FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="zfs_geli_und_usb_boot.txt.html">1.148. ZFS (raidz), Geli und USB Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../anwendungen/anwendungen_index.html">2. Anwendungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware_index.html">3. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spiele/spiele_index.html">4. Spiele</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd/freebsd_index.html">5. FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openbsd/openbsd_index.html">6. OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netbsd/netbsd_index.html">7. NetBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dragonflybsd/dragonflybsd_index.html">8. DragonFlyBSD</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BSDForen.de</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="howto_index.html"><span class="section-number">1. </span>Howto</a> &raquo;</li>
        
      <li><span class="section-number">1.94. </span>OpenVPN als Tunnel zum eigenen Netzwerk</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/howto/openvpn_als_tunnel_zum_eigenen_netzwerk.txt.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="openvpn-als-tunnel-zum-eigenen-netzwerk">
<h1><span class="section-number">1.94. </span>OpenVPN als Tunnel zum eigenen Netzwerk<a class="headerlink" href="#openvpn-als-tunnel-zum-eigenen-netzwerk" title="Link zu dieser Überschrift">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">Info</p>
<img alt="../_images/logo-freebsd.png" src="../_images/logo-freebsd.png" />
</div>
<p>Mit Hilfe eines VPNs kann man bequem auf Resourcen des eigenen Netzes zugreifen
und sogar seinen kompletten Traffic über den Tunnel routen, so dass man
Portsperren in öffentlichen Netzen (zum Beispiel im Uninetz) „umgehen“ kann. In
diesem HowTo wird beschrieben, wie man dies mit Hilfe von OpenVPN tun kann.</p>
<div class="section" id="installation">
<h2><span class="section-number">1.94.1. </span>Installation<a class="headerlink" href="#installation" title="Link zu dieser Überschrift">¶</a></h2>
<p>Es ist OpenVPN (server- und clientseitig), sowie die Bash Shell (nur
serverseitig) zu installieren.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.google.com/search?q=security/openvpn&amp;btnI=lucky">security/openvpn</a>
(FreeBSD Ports)</p></li>
<li><p><a class="reference external" href="https://www.google.com/search?q=shells/bash&amp;btnI=lucky">shells/bash</a>
(FreeBSD Ports)</p></li>
</ul>
<p>Gearbeitet wird in dem gesamten HowTo mit der Bash Shell, da die
easy-rsa Skripte diese verlangen. Falls keine dauerhafte Umstellung der
Shell gewünscht ist, wechselt man die aktuelle Shell mittels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># bash</span>
</pre></div>
</div>
<div class="section" id="erstellen-der-zertifikate">
<h3><span class="section-number">1.94.1.1. </span>Erstellen der Zertifikate<a class="headerlink" href="#erstellen-der-zertifikate" title="Link zu dieser Überschrift">¶</a></h3>
<p>Nun muss für den Server, sowie für jeden Client jeweils ein Zertifikat
erstellt werden. Generiert werden diese auf dem Server. Für die
Zertifikatserstellung nutzen wir easy-rsa. Easy-rsa ist eine Sammlung
von Skripten, welche die Erstellung der Zertifikate um einiges
erleichtern. Diese Skripte müssen zuerst noch installiert werden. Unter
DESTDIR ist das gewünschte Installationsverzeichnis anzugeben:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /usr/local/share/doc/openvpn/easy-rsa/2.0</span>
<span class="c1"># make install DESTDIR=/root/easy-rsaVPNgw/</span>
<span class="c1"># cd /root/easy-rsaVPNgw</span>
</pre></div>
</div>
<p>Nun bearbeiten wir das Skript vars. Dieses Skript enthält Variablen, welche zur
Erstellung der Zertifikate nötig sind. Die Schlüsselgröße passen wir noch an
indem wir sie von 1024bit auf 2048bit heraufsetzen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">KEY_SIZE</span><span class="o">=</span><span class="mi">2048</span>
</pre></div>
</div>
<p>Danach ersetzten wir noch die Werte</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">KEY_COUNTRY</span><span class="o">=</span><span class="s2">&quot;US&quot;</span>
<span class="n">export</span> <span class="n">KEY_PROVINCE</span><span class="o">=</span><span class="s2">&quot;CA&quot;</span>
<span class="n">export</span> <span class="n">KEY_CITY</span><span class="o">=</span><span class="s2">&quot;SanFrancisco&quot;</span>
<span class="n">export</span> <span class="n">KEY_ORG</span><span class="o">=</span><span class="s2">&quot;Fort-Funston&quot;</span>
<span class="n">export</span> <span class="n">KEY_EMAIL</span><span class="o">=</span><span class="s2">&quot;me@myhost.mydomain&quot;</span>
</pre></div>
</div>
<p>durch geeignetere. Zum Beispiel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">KEY_COUNTRY</span><span class="o">=</span><span class="s2">&quot;DE&quot;</span>
<span class="n">export</span> <span class="n">KEY_PROVINCE</span><span class="o">=</span><span class="s2">&quot;HESSEN&quot;</span>
<span class="n">export</span> <span class="n">KEY_CITY</span><span class="o">=</span><span class="s2">&quot;Frankfurt&quot;</span>
<span class="n">export</span> <span class="n">KEY_ORG</span><span class="o">=</span><span class="s2">&quot;SecretVPN&quot;</span>
<span class="n">export</span> <span class="n">KEY_EMAIL</span><span class="o">=</span><span class="s2">&quot;support@SecretVPN.de&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="erstellen-einer-eigenen-ca">
<h3><span class="section-number">1.94.1.2. </span>Erstellen einer eigenen CA<a class="headerlink" href="#erstellen-einer-eigenen-ca" title="Link zu dieser Überschrift">¶</a></h3>
<p>Zuerst müssen wir eine eigene CA erstellen. Dies wird mit den folgenden
Befehlen gemacht:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># source vars</span>
<span class="c1"># ./clean-all</span>
<span class="c1"># ./build-ca</span>
<span class="c1"># ./build-dh</span>
</pre></div>
</div>
</div>
<div class="section" id="server-zertifikat">
<h3><span class="section-number">1.94.1.3. </span>Server Zertifikat<a class="headerlink" href="#server-zertifikat" title="Link zu dieser Überschrift">¶</a></h3>
<p>Nun können wir das Server Zertifikat erstellen. Dieses Zertifikat wird
nur einmal erstellt und dem OpenVPN Server übergeben:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># source vars</span>
<span class="c1"># ./build-key-server VPNgwServer</span>
</pre></div>
</div>
</div>
<div class="section" id="client-zertifikat-erstellen">
<h3><span class="section-number">1.94.1.4. </span>Client Zertifikat erstellen<a class="headerlink" href="#client-zertifikat-erstellen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Jetzt wird pro Client ein Client Zertifikat erstellt. Hier für den
Client „fridolin“:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># source vars</span>
<span class="c1"># ./build-key fridolin</span>
</pre></div>
</div>
</div>
<div class="section" id="client-zertifikat-sperren">
<h3><span class="section-number">1.94.1.5. </span>Client Zertifikat sperren<a class="headerlink" href="#client-zertifikat-sperren" title="Link zu dieser Überschrift">¶</a></h3>
<p>Falls ein erstelltes Zertifikat nicht mehr benötigt wird oder abhanden
gekommen ist kann dieses mittels easy-rsa auch gesperrt werden. Hier für
das Zertifikat von „fridolin“:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># source vars</span>
<span class="c1"># ./revoke-full fridolin</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="konfiguration-von-openvpn">
<h2><span class="section-number">1.94.2. </span>Konfiguration von OpenVPN<a class="headerlink" href="#konfiguration-von-openvpn" title="Link zu dieser Überschrift">¶</a></h2>
<p>Nach der Erstellung der Zertifikate kann mit der Konfiguration von
OpenVPN begonnen werden.</p>
<div class="section" id="server-konfiguration">
<h3><span class="section-number">1.94.2.1. </span>Server Konfiguration<a class="headerlink" href="#server-konfiguration" title="Link zu dieser Überschrift">¶</a></h3>
<p>Damit Portsperren in fremden Netzen relativ einfach zu handhaben sind
wird der OpenVPN Server auf dem Port 80 lauschen und das TCP Protokoll
nutzen. Damit sollte eine Verbindung in jedem Netz zu stande kommen, in
dem das Surfen erlaubt ist. Dafür erstellen wir eine Konfigurationsdatei
mit einem beliebigen Namen (hier: /root/VPNgwServer.conf).</p>
<p>Darauf zu achten ist, dass vor dem Erstellen der Konfigurationsdatei ein
Zertifikat mit dem oben beschriebenen Befehl (./revoke-full) widerrufen
wird, da ansonsten die Datei crl.pem nicht erstellt wird und OpenVPN
dadurch nicht startet.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#Autentifizierungsmethode
auth RSA-SHA1-2
#Verschlüsselungsalgorithmus
cipher AES-256-CBC
#IP auf der gelauscht wird
local $IP_DES_SERVERS_IM_LAN
#Port auf dem gelauscht wird
port 80
proto tcp-server

mode server
tls-server
dev tap

client-to-client
float
keepalive 10 60

#IP des Servers im VPN
ifconfig 10.8.1.1 255.255.255.0
#IP Pool, der an Clients vergeben wird
ifconfig-pool 10.8.1.2 10.8.1.20
#IP leases speichern
ifconfig-pool-persist ipp.txt

#sende folgende Optionen zum Client
push &quot;route-gateway 10.8.1.1&quot;
push &quot;redirect-gateway&quot;
push &quot;dhcp-option DNS $DNS_SERVER_DES_HEIMNETZES&quot;

#Zertifikate
ca /root/easy-rsaVPNgw/keys/ca.crt
key /root/easy-rsaVPNgw/keys/VPNgwServer.key
cert /root/easy-rsaVPNgw/keys/VPNgwServer.crt
dh /root/easy-rsaVPNgw/keys/dh2048.pem
crl-verify /root/easy-rsaVPNgw/keys/crl.pem

#Starte Management Console auf Port 7506
management localhost 7506
#Nutze Komprimierung
comp-lzo

verb 4
mute 50
</pre></div>
</div>
<p>Nun muss noch FreeBSD eingerichtet werden. Hier ist in der
/boot/loader.conf die Zeile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">if_tap_load</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
</pre></div>
</div>
<p>einzufügen. Für einen automatischen Start beim Booten ist die
/etc/rc.conf um die Zielen</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openvpn_enable</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
<span class="n">openvpn_configfile</span><span class="o">=</span><span class="s2">&quot;/root/VPNgwServer.conf&quot;</span>
<span class="n">openvpn_dir</span><span class="o">=</span><span class="s2">&quot;/root/&quot;</span>
</pre></div>
</div>
<p>zu erweitern. Zum Schluss sind noch die richtigen Routen einzustellen,
um den Traffic in und aus dem VPN Netz ins heimische Netzwerk zu leiten.
Dafür aktivieren wir das IP Forwarding indem wir in die /etc/rc.conf die
Zeile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gateway_enable</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
</pre></div>
</div>
<p>hinzufügen und am Router des Heimnetzwerkes eine Route hinzufügen, die
als Router für den Netzwerkverkehr des VPN Netzes unseren Server angibt
(Destination IP: 10.8.1.0, Gateway: $IP_DES_SERVERS_IM_LAN). Zusätzlich
kann der Netzwerkverkehr mit einem Paketfilter wie pf eingeschränkt und
kontrolliert werden.</p>
</div>
<div class="section" id="client-konfiguration">
<h3><span class="section-number">1.94.2.2. </span>Client Konfiguration<a class="headerlink" href="#client-konfiguration" title="Link zu dieser Überschrift">¶</a></h3>
<p>Nun brauchen wir nur noch den Client einzurichten und der ersten
Verbindung steht nichts mehr im Wege. Auf dem Client müssen wir zuerst
die Konfigurationsdatei von OpenVPN erstellen. Diese legen wir der
Übersichtlichkeit halber in einen extra Ordner im Heimverzeichnis des
Nutzers (hier: /home/fridolin/VPNgw/VPNgw.conf).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#Verschluesselungsalgorithmus
cipher AES-256-CBC
#Autentifizierungsmethode
auth RSA-SHA1-2
#IP/DNS und Port des VPN Servers
remote $IP/DNS_DES_SERVERS
port 80
proto tcp-client

dev tap
tls-client

#Zertifikate
ca ca.crt
key fridolin.key
cert fridolin.crt

#Server ueberprueft Zertifikate auf Gueltigkeit
ns-cert-type server

#hole Configurationsoptionen vom Server
pull

#Nutze Komprimierung
comp-lzo

verb 4
mute 50
</pre></div>
</div>
<p>Danach kopieren wir die 3 Dateien ca.crt, fridolin.key und fridolin.crt
vom Server auf den Client (hier wurden die Dateien in das selbe
Verzeichnis wie die Konfigurationsdatei kopiert). Nun erstellen wir eine
ausführbare Datei mit der wir die VPN Verbindung starten können. Da bei
FreeBSD der DNS Server nicht verändert wird, obwohl es in der
Konfiguration angegeben ist wird dieser in dem Startskript verändert.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh
#set nameserver
nsset=$(cat /etc/resolv.conf | grep &quot;nameserver $DNS_SERVER_DES_HEIMNETZES&quot; | wc -l)
if [ $nsset -le 0 ]
        then
        cp /etc/resolv.conf /etc/resolv.conf.temp
        echo &quot;nameserver $DNS_SERVER_DES_HEIMNETZES&quot; &gt; /etc/resolv.conf
        cat /etc/resolv.conf.temp &gt;&gt; /etc/resolv.conf
fi

#start OpenVPN
cd /home/fridolin/VPNgw
openvpn --config VPNgw.conf

#unset nameserver
mv /etc/resolv.conf.temp /etc/resolv.conf
</pre></div>
</div>
</div>
</div>
<div class="section" id="test">
<h2><span class="section-number">1.94.3. </span>Test<a class="headerlink" href="#test" title="Link zu dieser Überschrift">¶</a></h2>
<p>Nun können wir den Tunnel das erste Mal testen. Dazu starten wir den OpenVPN
Server und danach den OpenVPN Client auf der Konsole. Server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /root</span>
<span class="c1"># openvpn --config VPNgwServer.conf</span>
</pre></div>
</div>
<p>Wenn folgende Zeile erscheint ist das Server erfolgreich gestartet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sat</span> <span class="n">Apr</span> <span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">08</span> <span class="mi">2010</span> <span class="n">us</span><span class="o">=</span><span class="mi">822164</span> <span class="n">Initialization</span> <span class="n">Sequence</span> <span class="n">Completed</span>
</pre></div>
</div>
<p>Nun wird der Client gestartet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /home/fridolin/VPN/</span>
<span class="c1"># openvpn --config VPNgw.conf</span>
</pre></div>
</div>
<p>Eine erfolgreiche Verbindung des Clients kann man auf der Konsole am Server
verfolgen. Der Client gibt mit folgender Zeile ebenfalls eine erfolgreiche
Verbindung an:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sat</span> <span class="n">Apr</span> <span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">29</span> <span class="mi">2010</span> <span class="n">us</span><span class="o">=</span><span class="mi">21798</span> <span class="n">Initialization</span> <span class="n">Sequence</span> <span class="n">Completed</span>
</pre></div>
</div>
<p>Mittels netstat -r und tcpdump -vvi tap0 kann man nun prüfen, ob die Routen
richtig gesetzt wurden und der Traffic nun über das TAP-Device anstatt der
normalen (W)LAN Karte läuft. Ist dies der Fall kann das VPN in Betrieb genommen
werden.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Stichwortverzeichnis</span></a></p></li>
</ul>
<p>Zuletzt geändert: 2021-05-29</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pakete_deinstallieren.txt.html" class="btn btn-neutral float-right" title="1.95. Pakete deinstallieren" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="openoffice_unter_freebsd.txt.html" class="btn btn-neutral float-left" title="1.93. OpenOffice unter FreeBSD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BSDForen.de.

    </p>
  </div>
    
    
    
    Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>